{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u6b22\u8fce\u4f7f\u7528MkDocs","text":"<p>\u8981\u67e5\u770b\u5b8c\u6574\u7684\u6587\u6863\uff0c\u8bf7\u8bbf\u95eemkdocs.org\u3002</p>"},{"location":"#_1","title":"\u547d\u4ee4","text":"<ul> <li> <p><code>mkdocs new [dir-name]</code> - \u521b\u5efa\u4e00\u4e2a\u65b0\u9879\u76ee\u3002</p> </li> <li> <p><code>mkdocs serve</code> - \u542f\u52a8\u5b9e\u65f6\u91cd\u65b0\u52a0\u8f7d\u7684\u6587\u6863\u670d\u52a1\u5668\u3002</p> </li> <li> <p><code>mkdocs build</code> - \u6784\u5efa\u6587\u6863\u7f51\u7ad9\u3002</p> </li> <li> <p><code>mkdocs -h</code> - \u6253\u5370\u5e2e\u52a9\u4fe1\u606f\u5e76\u9000\u51fa\u3002</p> </li> </ul>"},{"location":"#_2","title":"\u9879\u76ee\u5e03\u5c40","text":"<pre><code>mkdocs.yml    # \u914d\u7f6e\u6587\u4ef6\u3002\ndocs/\n    index.md  # \u6587\u6863\u9996\u9875\u3002\n    ...       # \u5176\u4ed6Markdown\u9875\u9762\u3001\u56fe\u7247\u548c\u5176\u4ed6\u6587\u4ef6\u3002\n</code></pre> <p>6666666</p>"},{"location":"first/","title":"First Post","text":""},{"location":"test/","title":"Index","text":"<p>\u4f5c\u8005\uff1a\u9a6c\u68a6\u9633</p>"},{"location":"test/#mqtt","title":"\u4e00\u3001MQTT \u534f\u8bae\u8be6\u89e3","text":""},{"location":"test/#11-mqtt","title":"1.1 \u4ec0\u4e48\u662f MQTT\uff1f","text":"<p>MQTT\uff08Message Queuing Telemetry Transport\uff0c\u6d88\u606f\u961f\u5217\u9065\u6d4b\u4f20\u8f93\u534f\u8bae\uff09\u662f\u4e00\u79cd\u57fa\u4e8e\u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f\u7684\u8f7b\u91cf\u7ea7\u901a\u4fe1\u534f\u8bae\u3002\u4f60\u53ef\u4ee5\u628a\u5b83\u60f3\u8c61\u6210\u4e00\u4e2a\u90ae\u5c40\u7cfb\u7edf\uff1a</p> <ul> <li>\u53d1\u5e03\u8005\uff08Publisher\uff09\uff1a\u5c31\u50cf\u5bc4\u4fe1\u7684\u4eba\uff0c\u628a\u6d88\u606f\u53d1\u9001\u5230\u7279\u5b9a\u7684\u201c\u90ae\u7bb1\u201d\uff08\u4e3b\u9898\uff09\u3002</li> <li>\u8ba2\u9605\u8005\uff08Subscriber\uff09\uff1a\u5c31\u50cf\u6536\u4fe1\u7684\u4eba\uff0c\u4ed6\u4eec\u4e8b\u5148\u544a\u8bc9\u90ae\u5c40\uff08Broker\uff09\u4ed6\u4eec\u5bf9\u54ea\u4e9b\u201c\u90ae\u7bb1\u201d\uff08\u4e3b\u9898\uff09\u7684\u4fe1\u4ef6\u611f\u5174\u8da3\u3002</li> <li>Broker\uff08\u4ee3\u7406\uff09\uff1a\u5c31\u50cf\u90ae\u5c40\uff0c\u8d1f\u8d23\u63a5\u6536\u53d1\u5e03\u8005\u7684\u6d88\u606f\uff0c\u5e76\u6839\u636e\u8ba2\u9605\u8005\u7684\u5174\u8da3\u5c06\u6d88\u606f\u5206\u53d1\u7ed9\u4ed6\u4eec\u3002</li> </ul> <p>MQTT \u534f\u8bae\u7531 IBM \u5728 1999 \u5e74\u5f00\u53d1\uff0c\u73b0\u5728\u662f ISO \u6807\u51c6\uff08ISO/IEC 20922\uff09\uff0c\u9002\u7528\u4e8e\u7269\u8054\u7f51\uff08IoT\uff09\u548c\u673a\u5668\u5bf9\u673a\u5668\uff08M2M\uff09\u901a\u4fe1\u3002</p>"},{"location":"test/#12-mqtt","title":"1.2 MQTT \u7684\u6838\u5fc3\u5de5\u4f5c\u673a\u5236","text":"<p>1. \u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f\uff1a</p> <ul> <li>\u53d1\u5e03\u8005\uff08Publisher\uff09\u5c06\u6d88\u606f\u53d1\u9001\u5230\u7279\u5b9a\u7684\u4e3b\u9898\uff08Topic\uff09\u3002</li> <li>\u8ba2\u9605\u8005\uff08Subscriber\uff09\u5411Broker\u8ba2\u9605\u611f\u5174\u8da3\u7684\u4e3b\u9898\u3002</li> <li>Broker\u8d1f\u8d23\u5c06\u53d1\u5e03\u5230\u4e3b\u9898\u7684\u6d88\u606f\u8def\u7531\u7ed9\u6240\u6709\u8ba2\u9605\u4e86\u8be5\u4e3b\u9898\u7684\u5ba2\u6237\u7aef\u3002</li> <li>\u8fd9\u79cd\u6a21\u5f0f\u5b9e\u73b0\u4e86\u53d1\u5e03\u8005\u548c\u8ba2\u9605\u8005\u7684\u89e3\u8026\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u5b83\u4eec\u4e0d\u9700\u8981\u77e5\u9053\u5f7c\u6b64\u7684\u5b58\u5728\u3002</li> </ul> <p>2. \u670d\u52a1\u8d28\u91cf\uff08QoS\uff09\u7b49\u7ea7\uff1a</p> <ul> <li>QoS 0\uff08\u6700\u591a\u4e00\u6b21\uff09\uff1a\u6d88\u606f\u53ef\u80fd\u4e22\u5931\uff0c\u4e5f\u53ef\u80fd\u56e0\u4e3a\u7f51\u7edc\u5c42\u6216\u4e2d\u95f4\u4ef6\u7684\u610f\u5916\u91cd\u653e\u800c\u51fa\u73b0\u91cd\u590d\uff0c\u4f46MQTT\u534f\u8bae\u672c\u8eab\u4e0d\u4f1a\u4e3b\u52a8\u518d\u53d1\u4e00\u6b21\u3002\u9002\u7528\u4e8e\u5bf9\u53ef\u9760\u6027\u8981\u6c42\u4e0d\u9ad8\u7684\u573a\u666f\uff0c\u5982\u4f20\u611f\u5668\u6570\u636e\u3002</li> <li>QoS 1\uff08\u81f3\u5c11\u4e00\u6b21\uff09\uff1a\u53d1\u9001\u7aef\u4f1a\u4e00\u76f4\u91cd\u8bd5\uff0c\u76f4\u5230\u6536\u5230\u63a5\u6536\u7aef\u7684PUBACK\u786e\u8ba4\uff0c\u56e0\u6b64\u6d88\u606f\u81f3\u5c11\u9001\u8fbe\u4e00\u6b21\uff0c\u4f46\u4e5f\u53ef\u80fd\u56e0\u786e\u8ba4\u4e22\u5931\u800c\u88ab\u91cd\u590d\u6295\u9012\u3002\u9002\u7528\u4e8e\u9700\u8981\u786e\u4fdd\u6d88\u606f\u9001\u8fbe\u4f46\u53ef\u4ee5\u5bb9\u5fcd\u91cd\u590d\u7684\u573a\u666f\u3002</li> <li>QoS 2\uff08\u53ea\u6709\u4e00\u6b21\uff09\uff1a\u901a\u8fc7\u56db\u6b65\u63e1\u624b\uff08PUBLISH \u2192 PUBREC \u2192 PUBREL \u2192 PUBCOMP\uff09\u4fdd\u8bc1\u6d88\u606f\u6070\u597d\u9001\u8fbe\u4e00\u6b21\uff1b\u82e5\u4efb\u4e00\u6b65\u4e22\u5931\uff0c\u53d1\u9001\u7aef\u4f1a\u91cd\u4f20\u5bf9\u5e94\u62a5\u6587\uff0c\u76f4\u81f3\u6574\u4e2a\u6d41\u7a0b\u5b8c\u6210\uff0c\u4ece\u800c\u907f\u514d\u91cd\u590d\u6216\u4e22\u5931\u3002\u9002\u7528\u4e8e\u5bf9\u6d88\u606f\u53ef\u9760\u6027\u8981\u6c42\u6781\u9ad8\u7684\u573a\u666f\uff0c\u5982\u91d1\u878d\u4ea4\u6613\u3002</li> </ul> <p>3. \u8f7b\u91cf\u7ea7\u8bbe\u8ba1\uff1a</p> <ul> <li>MQTT\u534f\u8bae\u5934\u6700\u5c0f\u53ea\u67092\u5b57\u8282\uff0c\u975e\u5e38\u9002\u5408\u7f51\u7edc\u5e26\u5bbd\u548c\u8bbe\u5907\u8d44\u6e90\u6709\u9650\u7684\u73af\u5883\u3002</li> <li>\u534f\u8bae\u7b80\u5355\uff0c\u6613\u4e8e\u5b9e\u73b0\uff0c\u964d\u4f4e\u4e86\u5f00\u53d1\u6210\u672c\u3002</li> </ul>"},{"location":"test/#13-mqtt","title":"1.3 MQTT \u7684\u4e3b\u8981\u4f18\u52bf","text":"<ul> <li>\u4f4e\u5e26\u5bbd\u6d88\u8017\uff1a\u534f\u8bae\u8bbe\u8ba1\u7cbe\u7b80\uff0c\u6709\u6548\u51cf\u5c11\u7f51\u7edc\u6d41\u91cf\u3002</li> <li>\u4f4e\u529f\u8017\uff1a\u9002\u7528\u4e8e\u7535\u6c60\u4f9b\u7535\u7684\u8bbe\u5907\u3002</li> <li>\u9ad8\u53ef\u9760\u6027\uff1a\u901a\u8fc7 QoS \u673a\u5236\u4fdd\u8bc1\u6d88\u606f\u4f20\u9012\u7684\u53ef\u9760\u6027\u3002</li> <li>\u53cc\u5411\u901a\u4fe1\uff1a\u652f\u6301\u8bbe\u5907\u95f4\u548c\u8bbe\u5907\u4e0e\u670d\u52a1\u5668\u95f4\u7684\u53cc\u5411\u901a\u4fe1\u3002</li> <li>\u591a\u8bed\u8a00\u652f\u6301\uff1a\u652f\u6301\u591a\u79cd\u7f16\u7a0b\u8bed\u8a00\uff0c\u4fbf\u4e8e\u5f00\u53d1\u3002</li> <li>\u5b89\u5168\u6027\u5f3a\uff1a\u652f\u6301\u7528\u6237\u540d/\u5bc6\u7801\u548c SSL/TLS \u52a0\u5bc6\uff0c\u4fdd\u969c\u901a\u4fe1\u5b89\u5168\u3002</li> </ul>"},{"location":"test/#14","title":"1.4 \u5178\u578b\u5e94\u7528\u573a\u666f","text":"<ul> <li>\u667a\u80fd\u5bb6\u5c45\uff1a\u667a\u80fd\u706f\u6ce1\u3001\u667a\u80fd\u63d2\u5ea7\u3001\u6e29\u63a7\u5668\u7b49\u8bbe\u5907\u901a\u8fc7 MQTT \u4e0e\u5bb6\u5ead\u7f51\u5173\u901a\u4fe1\u3002</li> <li>\u5de5\u4e1a\u81ea\u52a8\u5316\uff1a\u4f20\u611f\u5668\u6570\u636e\u91c7\u96c6\u3001\u8bbe\u5907\u72b6\u6001\u76d1\u63a7\u3002</li> <li>\u73af\u5883\u76d1\u6d4b\uff1a\u6c14\u8c61\u7ad9\u3001\u6c34\u8d28\u76d1\u6d4b\u7ad9\u7b49\u8fdc\u7a0b\u6570\u636e\u6536\u96c6\u3002</li> <li>\u8f66\u8054\u7f51\uff1a\u8f66\u8f86\u72b6\u6001\u4fe1\u606f\u4e0a\u62a5\u3001\u8fdc\u7a0b\u63a7\u5236\u6307\u4ee4\u4e0b\u53d1\u3002</li> <li>\u533b\u7597\u76d1\u63a7\uff1a\u8fdc\u7a0b\u75c5\u4eba\u76d1\u62a4\u8bbe\u5907\u6570\u636e\u4f20\u8f93\u3002</li> </ul>"},{"location":"test/#_1","title":"\u4e8c\u3001\u6f14\u793a\u529f\u80fd\u6982\u8ff0","text":"<p>1. \u521b\u5efa\u56db\u8def mqtt \u8fde\u63a5\uff0c\u8be6\u60c5\u5982\u4e0b</p> <p>\u6ce8\u610f\uff1a\u4ee3\u7801\u4e2d\u7684 mqtt \u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u4f1a\u4e0d\u5b9a\u671f\u91cd\u542f\u6216\u7ef4\u62a4\uff0c\u4ec5\u80fd\u7528\u4f5c\u6d4b\u8bd5\u7528\u9014\uff0c\u4e0d\u53ef\u5546\u7528\uff0c\u8bf4\u4e0d\u5b9a\u54ea\u4e00\u5929\u5c31\u5173\u95ed\u4e86\u3002\u7528\u6237\u5f00\u53d1\u9879\u76ee\u65f6\uff0c\u9700\u8981\u66ff\u6362\u4e3a\u81ea\u5df1\u7684\u5546\u7528\u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u3002</p> <ul> <li>\u521b\u5efa\u4e00\u4e2a mqtt client\uff0c\u8fde\u63a5 mqtt server\uff1b</li> <li>\u521b\u5efa\u4e00\u4e2a mqtt ssl client\uff0c\u8fde\u63a5 mqtt ssl server\uff0c\u4e0d\u505a\u8bc1\u4e66\u6821\u9a8c\uff1b</li> <li>\u521b\u5efa\u4e00\u4e2a mqtt ssl client\uff0c\u8fde\u63a5 mqtt ssl server\uff0cclient \u4ec5\u5355\u5411\u6821\u9a8c server \u7684\u8bc1\u4e66\uff0cserver \u4e0d\u6821\u9a8c client \u7684\u8bc1\u4e66\u548c\u5bc6\u94a5\u6587\u4ef6\uff1b</li> <li>\u521b\u5efa\u4e00\u4e2a mqtt ssl client\uff0c\u8fde\u63a5 mqtt ssl server\uff0cclient \u6821\u9a8c server \u7684\u8bc1\u4e66\uff0cserver \u6821\u9a8c client \u7684\u8bc1\u4e66\u548c\u5bc6\u94a5\u6587\u4ef6\uff1b</li> </ul> <p>2. \u6bcf\u4e00\u8def mqtt \u8fde\u63a5\u51fa\u73b0\u5f02\u5e38\u540e\uff0c\u81ea\u52a8\u91cd\u8fde\uff1b</p> <p>3. \u6bcf\u4e00\u8def mqtt \u8fde\u63a5\uff0cclient \u6309\u7167\u4ee5\u4e0b\u51e0\u79cd\u903b\u8f91\u53d1\u9001\u6570\u636e\u7ed9 server</p> <ul> <li>\u4e32\u53e3\u5e94\u7528\u529f\u80fd\u6a21\u5757 <code>uart_app.lua</code>\uff0c\u901a\u8fc7 uart1 \u63a5\u6536\u5230\u4e32\u53e3\u6570\u636e\uff0c\u5c06\u4e32\u53e3\u6570\u636e\u589e\u52a0 <code>send from uart:</code> \u524d\u7f00\u540e\uff0c\u4f7f\u7528 <code>mobile.imei()..\"/uart/up\"</code> \u4e3b\u9898\uff0c\u53d1\u9001\u7ed9 server\uff1b</li> <li>\u5b9a\u65f6\u5668\u5e94\u7528\u529f\u80fd\u6a21\u5757 <code>timer_app.lua</code>\uff0c\u5b9a\u65f6\u4ea7\u751f\u6570\u636e\uff0c\u5c06\u6570\u636e\u589e\u52a0 <code>send from timer\uff1a</code> \u524d\u7f00\u540e\uff0c\u4f7f\u7528 <code>mobile.imei()..\"/timer/up\"</code> \u4e3b\u9898\uff0c\u53d1\u9001\u7ed9 server\uff1b</li> </ul> <p>4. \u6bcf\u4e00\u8def mqtt \u8fde\u63a5\uff0cclient \u6536\u5230 server \u6570\u636e\u540e\uff0c\u5c06\u6570\u636e\u589e\u52a0 recv from mqtt/mqtt ssl/mqtt ssl ca/mqtt ssl mutual ca\uff08\u56db\u9009\u4e00\uff09server: \u524d\u7f00\u540e\uff0c\u901a\u8fc7 uart1 \u53d1\u9001\u51fa\u53bb\uff1b</p> <p>5. \u542f\u52a8\u4e00\u4e2a\u7f51\u7edc\u4e1a\u52a1\u903b\u8f91\u770b\u95e8\u72d7 task\uff0c\u7528\u6765\u76d1\u63a7\u7f51\u7edc\u73af\u5883\uff0c\u5982\u679c\u8fde\u7eed\u957f\u65f6\u95f4\u5de5\u4f5c\u4e0d\u6b63\u5e38\uff0c\u91cd\u542f\u6574\u4e2a\u8f6f\u4ef6\u7cfb\u7edf\uff1b</p> <p>6. netdrv_device\uff1a\u914d\u7f6e\u8fde\u63a5\u5916\u7f51\u4f7f\u7528\u7684\u7f51\u5361\uff0c\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u56db\u79cd\u9009\u62e9\uff08\u56db\u9009\u4e00\uff09</p> <p>(1) netdrv_4g\uff1a4G \u7f51\u5361</p> <p>(2) netdrv_wifi\uff1aWIFI STA \u7f51\u5361</p> <p>(3) netdrv_eth_spi\uff1a\u901a\u8fc7 SPI \u5916\u6302 CH390H \u82af\u7247\u7684\u4ee5\u592a\u7f51\u5361</p> <p>(4) netdrv_multiple\uff1a\u652f\u6301\u4ee5\u4e0a\u4e09\u79cd\u7f51\u5361\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e09\u79cd\u7f51\u5361\u7684\u4f18\u5148\u7ea7</p>"},{"location":"test/#_2","title":"\u4e09\u3001\u6f14\u793a\u786c\u4ef6\u73af\u5883","text":"<p>1. Air8000 \u5f00\u53d1\u677f\u4e00\u5757 + \u53ef\u4e0a\u7f51\u7684 sim \u5361\u4e00\u5f20 +4g \u5929\u7ebf\u4e00\u6839 +wifi \u5929\u7ebf\u4e00\u6839 + \u7f51\u7ebf\u4e00\u6839\uff1a</p> <ul> <li>sim \u5361\u63d2\u5165\u5f00\u53d1\u677f\u7684 sim \u5361\u69fd</li> <li>\u5929\u7ebf\u88c5\u5230\u5f00\u53d1\u677f\u4e0a</li> <li>\u7f51\u7ebf\u4e00\u7aef\u63d2\u5165\u5f00\u53d1\u677f\u7f51\u53e3\uff0c\u53e6\u5916\u4e00\u7aef\u8fde\u63a5\u53ef\u4ee5\u4e0a\u5916\u7f51\u7684\u8def\u7531\u5668\u7f51\u53e3</li> </ul> <p>2. TYPE-C USB \u6570\u636e\u7ebf\u4e00\u6839 + USB \u8f6c\u4e32\u53e3\u6570\u636e\u7ebf\u4e00\u6839\uff0cAir8000 \u5f00\u53d1\u677f\u548c\u6570\u636e\u7ebf\u7684\u786c\u4ef6\u63a5\u7ebf\u65b9\u5f0f\u4e3a\uff1a</p> <ul> <li>Air8000 \u5f00\u53d1\u677f\u901a\u8fc7 TYPE-C USB \u53e3\u4f9b\u7535\uff1b\uff08\u5916\u90e8\u4f9b\u7535/USB \u4f9b\u7535 \u62e8\u52a8\u5f00\u5173 \u62e8\u5230 USB \u4f9b\u7535\u4e00\u7aef\uff09</li> <li>TYPE-C USB \u6570\u636e\u7ebf\u76f4\u63a5\u63d2\u5230\u6838\u5fc3\u677f\u7684 TYPE-C USB \u5ea7\u5b50\uff0c\u53e6\u5916\u4e00\u7aef\u8fde\u63a5\u7535\u8111 USB \u53e3\uff1b</li> <li>USB \u8f6c\u4e32\u53e3\u6570\u636e\u7ebf\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u767d\u7ebf\u8fde\u63a5\u5f00\u53d1\u677f\u7684 UART1_TX\uff0c\u7eff\u7ebf\u8fde\u63a5\u5f00\u53d1\u677f\u7684 UART1_RX\uff0c\u9ed1\u7ebf\u8fde\u63a5\u6838\u5fc3\u677f\u7684 GND\uff0c\u53e6\u5916\u4e00\u7aef\u8fde\u63a5\u7535\u8111 USB \u53e3\uff1b</li> </ul>"},{"location":"test/#_3","title":"\u56db\u3001\u6f14\u793a\u8f6f\u4ef6\u73af\u5883","text":""},{"location":"test/#41","title":"4.1 \u8f6f\u4ef6\u73af\u5883","text":"<p>1. \u70e7\u5f55\u5de5\u5177\uff1aLuatools \u4e0b\u8f7d\u8c03\u8bd5\u5de5\u5177</p> <p>2. \u5185\u6838\u56fa\u4ef6\uff1aAir8000 V2012 \u7248\u672c\u56fa\u4ef6\uff08\u7406\u8bba\u4e0a\uff0c2025 \u5e74 7 \u6708 26 \u65e5\u4e4b\u540e\u53d1\u5e03\u7684\u56fa\u4ef6\u90fd\u53ef\u4ee5\uff09</p> <p>3. \u811a\u672c\u6587\u4ef6\uff1aAir8000 MQTT \u811a\u672c\u6587\u4ef6</p> <p>3. PC \u7aef\u4e32\u53e3\u5de5\u5177\uff1a\u4f8b\u5982 SSCOM\u3001LLCOM \u7b49\u90fd\u53ef\u4ee5</p> <p>4. MQTT \u5ba2\u6237\u7aef\uff1aMQTT \u5ba2\u6237\u7aef\u8f6f\u4ef6 MQTTX</p> <p>5. LuatOS \u8fd0\u884c\u6240\u9700\u8981\u7684 lib \u6587\u4ef6\uff1a\u4f7f\u7528 Luatools \u70e7\u5f55\u65f6\uff0c\u52fe\u9009 \u6dfb\u52a0\u9ed8\u8ba4 lib \u9009\u9879\uff0c\u4f7f\u7528\u9ed8\u8ba4 lib \u811a\u672c\u6587\u4ef6\u3002</p> <p>\u51c6\u5907\u597d\u8f6f\u4ef6\u73af\u5883\u4e4b\u540e\uff0c\u63a5\u4e0b\u6765\u67e5\u770b\u5982\u4f55\u70e7\u5f55\u9879\u76ee\u6587\u4ef6\u5230 Air8000 \u6838\u5fc3\u677f\u4e2d\uff0c\u5c06\u672c\u7bc7\u6587\u7ae0\u4e2d\u6f14\u793a\u4f7f\u7528\u7684\u9879\u76ee\u6587\u4ef6\u70e7\u5f55\u5230 Air8000 \u5f00\u53d1\u677f\u4e2d\u3002</p>"},{"location":"test/#42-api","title":"4.2 API \u4ecb\u7ecd","text":"<p>sys \u5e93\uff1ahttps://docs.openluat.com/osapi/core/sys/</p> <p>libnet \u5e93\uff1ahttps://docs.openluat.com/osapi/ext/libnet/</p> <p>socket \u5e93\uff1ahttps://docs.openluat.com/osapi/core/socket/</p> <p>mqtt \u5e93\uff1ahttps://docs.openluat.com/osapi/core/mqtt/</p>"},{"location":"test/#_4","title":"\u4e94\u3001\u7a0b\u5e8f\u7ed3\u6784","text":"<pre><code>mqtt/\n\u251c\u2500\u2500 main.lua\n\u251c\u2500\u2500 mqtt/\n\u2502   \u251c\u2500\u2500 mqtt_main.lua\n\u2502   \u251c\u2500\u2500 mqtt_receiver.lua\n\u2502   \u2514\u2500\u2500 mqtt_sender.lua\n\u251c\u2500\u2500 mqtts/\n\u2502   \u251c\u2500\u2500 mqtts_main.lua\n\u2502   \u251c\u2500\u2500 mqtts_receiver.lua\n\u2502   \u2514\u2500\u2500 mqtts_sender.lua\n\u251c\u2500\u2500 mqtts_ca/\n\u2502   \u251c\u2500\u2500 mqtts_ca_main.lua\n\u2502   \u251c\u2500\u2500 mqtts_ca_receiver.lua\n\u2502   \u251c\u2500\u2500 mqtts_ca_sender.lua\n\u2502   \u251c\u2500\u2500 openluat_root_ca.crt\n\u2502   \u2514\u2500\u2500 sntp_app.lua\n\u251c\u2500\u2500 mqtts_mutual_ca/\n\u2502   \u251c\u2500\u2500 airtest_client.crt\n\u2502   \u251c\u2500\u2500 airtest_client.key\n\u2502   \u251c\u2500\u2500 mqtts_m_ca_main.lua\n\u2502   \u251c\u2500\u2500 mqtts_m_ca_receiver.lua\n\u2502   \u251c\u2500\u2500 mqtts_m_ca_sender.lua\n\u2502   \u251c\u2500\u2500 openluat_root_ca.crt\n\u2502   \u2514\u2500\u2500 sntp_app.lua\n\u251c\u2500\u2500 netdrv/\n\u2502   \u251c\u2500\u2500 netdrv_4g.lua\n\u2502   \u251c\u2500\u2500 netdrv_eth_spi.lua\n\u2502   \u251c\u2500\u2500 netdrv_multiple.lua\n\u2502   \u2514\u2500\u2500 netdrv_wifi.lua\n\u251c\u2500\u2500 netdrv_device.lua\n\u251c\u2500\u2500 network_watchdog.lua\n\u251c\u2500\u2500 timer_app.lua\n\u2514\u2500\u2500 uart_app.lua\n</code></pre>"},{"location":"test/#51","title":"5.1 \u6587\u4ef6\u8bf4\u660e","text":"<ul> <li><code>main.lua</code>\uff1a\u4e3b\u7a0b\u5e8f\u5165\u53e3\u6587\u4ef6\uff0c\u8d1f\u8d23\u521d\u59cb\u5316\u7cfb\u7edf\u3001\u542f\u52a8\u7f51\u7edc\u9a71\u52a8\u548c MQTT \u5ba2\u6237\u7aef\u3002</li> <li><code>mqtt/</code>\uff1a\u666e\u901a MQTT \u8fde\u63a5\u76f8\u5173\u6587\u4ef6\u3002</li> <li><code>mqtt_main.lua</code>\uff1a\u666e\u901a MQTT \u5ba2\u6237\u7aef\u7684\u521d\u59cb\u5316\u548c\u4e8b\u4ef6\u5904\u7406\u3002</li> <li><code>mqtt_receiver.lua</code>\uff1a\u666e\u901a MQTT \u5ba2\u6237\u7aef\u7684\u6570\u636e\u63a5\u6536\u5904\u7406\u3002</li> <li><code>mqtt_sender.lua</code>\uff1a\u666e\u901a MQTT \u5ba2\u6237\u7aef\u7684\u6570\u636e\u53d1\u9001\u961f\u5217\u7ba1\u7406\u3002</li> <li><code>mqtts/</code>\uff1aMQTT SSL \u8fde\u63a5\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\u76f8\u5173\u6587\u4ef6\u3002</li> <li><code>mqtts_main.lua</code>\uff1aMQTT SSL \u5ba2\u6237\u7aef\u7684\u521d\u59cb\u5316\u548c\u4e8b\u4ef6\u5904\u7406\u3002</li> <li><code>mqtts_receiver.lua</code>\uff1aMQTT SSL \u5ba2\u6237\u7aef\u7684\u6570\u636e\u63a5\u6536\u5904\u7406\u3002</li> <li><code>mqtts_sender.lua</code>\uff1aMQTT SSL \u5ba2\u6237\u7aef\u7684\u6570\u636e\u53d1\u9001\u961f\u5217\u7ba1\u7406\u3002</li> <li><code>mqtts_ca/</code>\uff1aMQTT SSL \u8fde\u63a5\uff08\u5355\u5411\u8bc1\u4e66\u6821\u9a8c\uff09\u76f8\u5173\u6587\u4ef6\u3002</li> <li><code>mqtts_ca_main.lua</code>\uff1aMQTT SSL \u5355\u5411\u8bc1\u4e66\u6821\u9a8c\u5ba2\u6237\u7aef\u7684\u521d\u59cb\u5316\u548c\u4e8b\u4ef6\u5904\u7406\u3002</li> <li><code>mqtts_ca_receiver.lua</code>\uff1aMQTT SSL \u5355\u5411\u8bc1\u4e66\u6821\u9a8c\u5ba2\u6237\u7aef\u7684\u6570\u636e\u63a5\u6536\u5904\u7406\u3002</li> <li><code>mqtts_ca_sender.lua</code>\uff1aMQTT SSL \u5355\u5411\u8bc1\u4e66\u6821\u9a8c\u5ba2\u6237\u7aef\u7684\u6570\u636e\u53d1\u9001\u961f\u5217\u7ba1\u7406\u3002</li> <li><code>openluat_root_ca.crt</code>\uff1a\u670d\u52a1\u5668 CA \u8bc1\u4e66\u6587\u4ef6\u3002</li> <li><code>sntp_app.lua</code>\uff1a\u65f6\u95f4\u540c\u6b65\u5e94\u7528\u3002</li> <li><code>mqtts_mutual_ca/</code>\uff1aMQTT SSL \u8fde\u63a5\uff08\u53cc\u5411\u8bc1\u4e66\u6821\u9a8c\uff09\u76f8\u5173\u6587\u4ef6\u3002</li> <li><code>mqtts_m_ca_main.lua</code>\uff1aMQTT SSL \u53cc\u5411\u8bc1\u4e66\u6821\u9a8c\u5ba2\u6237\u7aef\u7684\u521d\u59cb\u5316\u548c\u4e8b\u4ef6\u5904\u7406\u3002</li> <li><code>mqtts_m_ca_receiver.lua</code>\uff1aMQTT SSL \u53cc\u5411\u8bc1\u4e66\u6821\u9a8c\u5ba2\u6237\u7aef\u7684\u6570\u636e\u63a5\u6536\u5904\u7406\u3002</li> <li><code>mqtts_m_ca_sender.lua</code>\uff1aMQTT SSL \u53cc\u5411\u8bc1\u4e66\u6821\u9a8c\u5ba2\u6237\u7aef\u7684\u6570\u636e\u53d1\u9001\u961f\u5217\u7ba1\u7406\u3002</li> <li><code>airtest_client.crt</code>\uff1a\u5ba2\u6237\u7aef\u8bc1\u4e66\u6587\u4ef6\u3002</li> <li><code>airtest_client.key</code>\uff1a\u5ba2\u6237\u7aef\u79c1\u94a5\u6587\u4ef6\u3002</li> <li><code>openluat_root_ca.crt</code>\uff1a\u670d\u52a1\u5668 CA \u8bc1\u4e66\u6587\u4ef6\u3002</li> <li><code>sntp_app.lua</code>\uff1a\u65f6\u95f4\u540c\u6b65\u5e94\u7528\u3002</li> <li><code>netdrv/</code>\uff1a\u7f51\u7edc\u9a71\u52a8\u76f8\u5173\u6587\u4ef6\u3002</li> <li><code>netdrv_4g.lua</code>\uff1a4G \u7f51\u7edc\u9a71\u52a8\u3002</li> <li><code>netdrv_eth_spi.lua</code>\uff1aSPI \u4ee5\u592a\u7f51\u9a71\u52a8\u3002</li> <li><code>netdrv_multiple.lua</code>\uff1a\u591a\u7f51\u7edc\u9a71\u52a8\u7ba1\u7406\u3002</li> <li><code>netdrv_wifi.lua</code>\uff1aWIFI \u7f51\u7edc\u9a71\u52a8\u3002</li> <li><code>netdrv_device.lua</code>\uff1a\u7f51\u7edc\u8bbe\u5907\u914d\u7f6e\u6587\u4ef6\u3002</li> <li><code>network_watchdog.lua</code>\uff1a\u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7\u3002</li> <li><code>timer_app.lua</code>\uff1a\u5b9a\u65f6\u5668\u5e94\u7528\uff0c\u7528\u4e8e\u751f\u6210\u6d4b\u8bd5\u6570\u636e\u3002</li> <li><code>uart_app.lua</code>\uff1a\u4e32\u53e3\u5e94\u7528\uff0c\u7528\u4e8e\u4e0e PC \u7aef\u901a\u4fe1\u3002</li> </ul>"},{"location":"test/#_5","title":"\u516d\u3001\u6838\u5fc3\u6a21\u5757\u8be6\u89e3","text":""},{"location":"test/#61-mainlua","title":"6.1 \u4e3b\u7a0b\u5e8f (<code>main.lua</code>)","text":"<p>\u4e3b\u7a0b\u5e8f\u6587\u4ef6 <code>main.lua</code> \u662f\u6574\u4e2a\u9879\u76ee\u7684\u5165\u53e3\u70b9\u3002\u5b83\u8d1f\u8d23\u521d\u59cb\u5316\u7cfb\u7edf\u73af\u5883\u3002</p>"},{"location":"test/#611","title":"6.1.1 \u521d\u59cb\u5316\u6d41\u7a0b","text":"<p>1. \u9879\u76ee\u548c\u7248\u672c\u5b9a\u4e49\uff1a</p> <ul> <li>\u5b9a\u4e49<code>PROJECT</code>\u548c<code>VERSION</code>\u53d8\u91cf\u3002</li> </ul> <p>2. \u65e5\u5fd7\u8bb0\u5f55\uff1a</p> <ul> <li>\u4f7f\u7528<code>log.info(\"main\", PROJECT, VERSION)</code>\u5728\u65e5\u5fd7\u4e2d\u6253\u5370\u9879\u76ee\u540d\u548c\u7248\u672c\u53f7\u3002</li> </ul> <p>3. \u770b\u95e8\u72d7\u521d\u59cb\u5316\uff08\u5982\u679c\u652f\u6301\uff09\uff1a</p> <ul> <li>\u914d\u7f6e\u5e76\u542f\u52a8\u786c\u4ef6\u770b\u95e8\u72d7\uff0c\u9632\u6b62\u7a0b\u5e8f\u6b7b\u5faa\u73af\u5361\u6b7b\u3002</li> </ul> <p>4. \u52a0\u8f7d\u529f\u80fd\u6a21\u5757\uff1a</p> <ul> <li>\u52a0\u8f7d\u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7\u6a21\u5757\uff08<code>network_watchdog</code>\uff09\u3002</li> <li>\u52a0\u8f7d\u7f51\u7edc\u9a71\u52a8\u8bbe\u5907\u6a21\u5757\uff08<code>netdrv_device</code>\uff09\u3002</li> <li>\u52a0\u8f7d\u4e32\u53e3\u5e94\u7528\u6a21\u5757\uff08<code>uart_app</code>\uff09\u3002</li> <li>\u52a0\u8f7d\u5b9a\u65f6\u5668\u5e94\u7528\u6a21\u5757\uff08<code>timer_app</code>\uff09\u3002</li> <li>\u52a0\u8f7dMQTT\u5ba2\u6237\u7aef\u4e3b\u6a21\u5757\uff08<code>mqtt_main</code>\uff09\u3002</li> <li>\u52a0\u8f7dMQTT SSL\u5ba2\u6237\u7aef\u4e3b\u6a21\u5757\uff08<code>mqtts_main</code>\u3001<code>mqtts_ca_main</code>\u3001<code>mqtts_m_ca_main</code>\uff09\u3002</li> </ul> <p>5. \u542f\u52a8\u4efb\u52a1\u8c03\u5ea6\u5668\uff1a</p> <ul> <li>\u8c03\u7528<code>sys.run()</code>\u542f\u52a8LuatOS\u7684\u4efb\u52a1\u8c03\u5ea6\u5668\uff0c\u5f00\u59cb\u6267\u884c\u5404\u4e2a\u4efb\u52a1\u3002</li> </ul> <pre><code>--[[\n@module  main\n@summary LuatOS\u7528\u6237\u5e94\u7528\u811a\u672c\u6587\u4ef6\u5165\u53e3\uff0c\u603b\u4f53\u8c03\u5ea6\u5e94\u7528\u903b\u8f91\n@version 1.0\n@date    2025.07.28\n@author  \u9a6c\u68a6\u9633\n@usage\n\u672cdemo\u6f14\u793a\u7684\u6838\u5fc3\u529f\u80fd\u4e3a\uff1a\n1\u3001\u521b\u5efa\u56db\u8defmqtt\u8fde\u63a5\uff0c\u8be6\u60c5\u5982\u4e0b\n- \u521b\u5efa\u4e00\u4e2amqtt client\uff0c\u8fde\u63a5mqtt server\uff1b\n- \u521b\u5efa\u4e00\u4e2amqtt ssl client\uff0c\u8fde\u63a5mqtt ssl server\uff0c\u4e0d\u505a\u8bc1\u4e66\u6821\u9a8c\uff1b\n- \u521b\u5efa\u4e00\u4e2amqtt ssl client\uff0c\u8fde\u63a5mqtt ssl server\uff0cclient\u4ec5\u5355\u5411\u6821\u9a8cserver\u7684\u8bc1\u4e66\uff0cserver\u4e0d\u6821\u9a8cclient\u7684\u8bc1\u4e66\u548c\u5bc6\u94a5\u6587\u4ef6\uff1b\n- \u521b\u5efa\u4e00\u4e2amqtt ssl client\uff0c\u8fde\u63a5mqtt ssl server\uff0cclient\u6821\u9a8cserver\u7684\u8bc1\u4e66\uff0cserver\u6821\u9a8cclient\u7684\u8bc1\u4e66\u548c\u5bc6\u94a5\u6587\u4ef6\uff1b\n2\u3001\u6bcf\u4e00\u8defmqtt\u8fde\u63a5\u51fa\u73b0\u5f02\u5e38\u540e\uff0c\u81ea\u52a8\u91cd\u8fde\uff1b\n3\u3001\u6bcf\u4e00\u8defmqtt\u8fde\u63a5\uff0cclient\u6309\u7167\u4ee5\u4e0b\u51e0\u79cd\u903b\u8f91\u53d1\u9001\u6570\u636e\u7ed9server\n- \u4e32\u53e3\u5e94\u7528\u529f\u80fd\u6a21\u5757uart_app.lua\uff0c\u901a\u8fc7uart1\u63a5\u6536\u5230\u4e32\u53e3\u6570\u636e\uff0c\u5c06\u4e32\u53e3\u6570\u636e\u589e\u52a0send from uart: \u524d\u7f00\u540e\uff0c\u4f7f\u7528mobile.imei()..\"/uart/up\"\u4e3b\u9898\uff0c\u53d1\u9001\u7ed9server\uff1b\n- \u5b9a\u65f6\u5668\u5e94\u7528\u529f\u80fd\u6a21\u5757timer_app.lua\uff0c\u5b9a\u65f6\u4ea7\u751f\u6570\u636e\uff0c\u5c06\u6570\u636e\u589e\u52a0send from timer\uff1a\u524d\u7f00\u540e\uff0c\u4f7f\u7528mobile.imei()..\"/timer/up\"\u4e3b\u9898\uff0c\u53d1\u9001\u7ed9server\uff1b\n4\u3001\u6bcf\u4e00\u8defmqtt\u8fde\u63a5\uff0cclient\u6536\u5230server\u6570\u636e\u540e\uff0c\u5c06\u6570\u636e\u589e\u52a0recv from mqtt/mqtt ssl/mqtt ssl ca/mqtt ssl mutual ca\uff08\u56db\u9009\u4e00\uff09server: \u524d\u7f00\u540e\uff0c\u901a\u8fc7uart1\u53d1\u9001\u51fa\u53bb\uff1b\n5\u3001\u542f\u52a8\u4e00\u4e2a\u7f51\u7edc\u4e1a\u52a1\u903b\u8f91\u770b\u95e8\u72d7task\uff0c\u7528\u6765\u76d1\u63a7\u7f51\u7edc\u73af\u5883\uff0c\u5982\u679c\u8fde\u7eed\u957f\u65f6\u95f4\u5de5\u4f5c\u4e0d\u6b63\u5e38\uff0c\u91cd\u542f\u6574\u4e2a\u8f6f\u4ef6\u7cfb\u7edf\uff1b\n6\u3001netdrv_device\uff1a\u914d\u7f6e\u8fde\u63a5\u5916\u7f51\u4f7f\u7528\u7684\u7f51\u5361\uff0c\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u56db\u79cd\u9009\u62e9\uff08\u56db\u9009\u4e00\uff09\n   (1) netdrv_4g\uff1a4G\u7f51\u5361\n   (2) netdrv_wifi\uff1aWIFI STA\u7f51\u5361\n   (3) netdrv_eth_spi\uff1a\u901a\u8fc7SPI\u5916\u6302CH390H\u82af\u7247\u7684\u4ee5\u592a\u7f51\u5361\n   (4) netdrv_multiple\uff1a\u652f\u6301\u4ee5\u4e0a\u4e09\u79cd\u7f51\u5361\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e09\u79cd\u7f51\u5361\u7684\u4f18\u5148\u7ea7\n\n\u66f4\u591a\u8bf4\u660e\u53c2\u8003\u672c\u76ee\u5f55\u4e0b\u7684readme.md\u6587\u4ef6\n]]\n\n--[[\n\u5fc5\u987b\u5b9a\u4e49PROJECT\u548cVERSION\u53d8\u91cf\uff0cLuatools\u5de5\u5177\u4f1a\u7528\u5230\u8fd9\u4e24\u4e2a\u53d8\u91cf\uff0c\u8fdc\u7a0b\u5347\u7ea7\u529f\u80fd\u4e5f\u4f1a\u7528\u5230\u8fd9\u4e24\u4e2a\u53d8\u91cf\nPROJECT\uff1a\u9879\u76ee\u540d\uff0cascii string\u7c7b\u578b\n        \u53ef\u4ee5\u968f\u4fbf\u5b9a\u4e49\uff0c\u53ea\u8981\u4e0d\u4f7f\u7528,\u5c31\u884c\nVERSION\uff1a\u9879\u76ee\u7248\u672c\u53f7\uff0cascii string\u7c7b\u578b\n        \u5982\u679c\u4f7f\u7528\u5408\u5b99iot.openluat.com\u8fdb\u884c\u8fdc\u7a0b\u5347\u7ea7\uff0c\u5fc5\u987b\u6309\u7167\"XXX.YYY.ZZZ\"\u4e09\u6bb5\u683c\u5f0f\u5b9a\u4e49\uff1a\n            X\u3001Y\u3001Z\u5404\u8868\u793a1\u4f4d\u6570\u5b57\uff0c\u4e09\u4e2aX\u8868\u793a\u7684\u6570\u5b57\u53ef\u4ee5\u76f8\u540c\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u540c\uff0c\u540c\u7406\u4e09\u4e2aY\u548c\u4e09\u4e2aZ\u8868\u793a\u7684\u6570\u5b57\u4e5f\u662f\u53ef\u4ee5\u76f8\u540c\uff0c\u53ef\u4ee5\u4e0d\u540c\n            \u56e0\u4e3a\u5386\u53f2\u539f\u56e0\uff0cYYY\u8fd9\u4e09\u4f4d\u6570\u5b57\u5fc5\u987b\u5b58\u5728\uff0c\u4f46\u662f\u6ca1\u6709\u4efb\u4f55\u7528\u5904\uff0c\u53ef\u4ee5\u4e00\u76f4\u5199\u4e3a000\n        \u5982\u679c\u4e0d\u4f7f\u7528\u5408\u5b99iot.openluat.com\u8fdb\u884c\u8fdc\u7a0b\u5347\u7ea7\uff0c\u6839\u636e\u81ea\u5df1\u9879\u76ee\u7684\u9700\u6c42\uff0c\u81ea\u5b9a\u4e49\u683c\u5f0f\u5373\u53ef\n]]\nPROJECT = \"MQTT\"\nVERSION = \"001.000.000\"\n\n-- \u5728\u65e5\u5fd7\u4e2d\u6253\u5370\u9879\u76ee\u540d\u548c\u9879\u76ee\u7248\u672c\u53f7\nlog.info(\"main\", PROJECT, VERSION)\n\n-- \u5982\u679c\u5185\u6838\u56fa\u4ef6\u652f\u6301wdt\u770b\u95e8\u72d7\u529f\u80fd\uff0c\u6b64\u5904\u5bf9\u770b\u95e8\u72d7\u8fdb\u884c\u521d\u59cb\u5316\u548c\u5b9a\u65f6\u5582\u72d7\u5904\u7406\n-- \u5982\u679c\u811a\u672c\u7a0b\u5e8f\u6b7b\u5faa\u73af\u5361\u6b7b\uff0c\u5c31\u4f1a\u65e0\u6cd5\u53ca\u65f6\u5582\u72d7\uff0c\u6700\u7ec8\u4f1a\u81ea\u52a8\u91cd\u542f\nif wdt then\n    --\u914d\u7f6e\u5582\u72d7\u8d85\u65f6\u65f6\u95f4\u4e3a9\u79d2\u949f\n    wdt.init(9000)\n    --\u542f\u52a8\u4e00\u4e2a\u5faa\u73af\u5b9a\u65f6\u5668\uff0c\u6bcf\u96943\u79d2\u949f\u5582\u4e00\u6b21\u72d7\n    sys.timerLoopStart(wdt.feed, 3000)\nend\n\n-- \u5982\u679c\u5185\u6838\u56fa\u4ef6\u652f\u6301errDump\u529f\u80fd\uff0c\u6b64\u5904\u8fdb\u884c\u914d\u7f6e\uff0c\u3010\u5f3a\u70c8\u5efa\u8bae\u6253\u5f00\u6b64\u5904\u7684\u6ce8\u91ca\u3011\n-- \u56e0\u4e3a\u6b64\u529f\u80fd\u6a21\u5757\u53ef\u4ee5\u8bb0\u5f55\u5e76\u4e14\u4e0a\u4f20\u811a\u672c\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u8bed\u6cd5\u9519\u8bef\u6216\u8005\u5176\u4ed6\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u53ef\u4ee5\u521d\u6b65\u5206\u6790\u4e00\u4e9b\u8bbe\u5907\u8fd0\u884c\u5f02\u5e38\u7684\u95ee\u9898\n-- \u4ee5\u4e0b\u4ee3\u7801\u662f\u6700\u57fa\u672c\u7684\u7528\u6cd5\uff0c\u66f4\u590d\u6742\u7684\u7528\u6cd5\u53ef\u4ee5\u8be6\u7ec6\u9605\u8bfbAPI\u8bf4\u660e\u6587\u6863\n-- \u542f\u52a8errDump\u65e5\u5fd7\u5b58\u50a8\u5e76\u4e14\u4e0a\u4f20\u529f\u80fd\uff0c600\u79d2\u4e0a\u4f20\u4e00\u6b21\n-- if errDump then\n--     errDump.config(true, 600)\n-- end\n\n-- \u4f7f\u7528LuatOS\u5f00\u53d1\u7684\u4efb\u4f55\u4e00\u4e2a\u9879\u76ee\uff0c\u90fd\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528\u8fdc\u7a0b\u5347\u7ea7FOTA\u529f\u80fd\n-- \u53ef\u4ee5\u4f7f\u7528\u5408\u5b99\u7684iot.openluat.com\u5e73\u53f0\u8fdb\u884c\u8fdc\u7a0b\u5347\u7ea7\n-- \u4e5f\u53ef\u4ee5\u4f7f\u7528\u5ba2\u6237\u81ea\u5df1\u642d\u5efa\u7684\u5e73\u53f0\u8fdb\u884c\u8fdc\u7a0b\u5347\u7ea7\n-- \u8fdc\u7a0b\u5347\u7ea7\u7684\u8be6\u7ec6\u7528\u6cd5\uff0c\u53ef\u4ee5\u53c2\u8003fota\u7684demo\u8fdb\u884c\u4f7f\u7528\n\n-- \u542f\u52a8\u4e00\u4e2a\u5faa\u73af\u5b9a\u65f6\u5668\n-- \u6bcf\u96943\u79d2\u949f\u6253\u5370\u4e00\u6b21\u603b\u5185\u5b58\uff0c\u5b9e\u65f6\u7684\u5df2\u4f7f\u7528\u5185\u5b58\uff0c\u5386\u53f2\u6700\u9ad8\u7684\u5df2\u4f7f\u7528\u5185\u5b58\u60c5\u51b5\n-- \u65b9\u4fbf\u5206\u6790\u5185\u5b58\u4f7f\u7528\u662f\u5426\u6709\u5f02\u5e38\n-- sys.timerLoopStart(function()\n--     log.info(\"mem.lua\", rtos.meminfo())\n--     log.info(\"mem.sys\", rtos.meminfo(\"sys\"))\n-- end, 3000)\n\n-- \u52a0\u8f7d\u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7\u529f\u80fd\u6a21\u5757\nrequire \"network_watchdog\"\n\n-- \u52a0\u8f7d\u7f51\u7edc\u9a71\u52a8\u8bbe\u5907\u529f\u80fd\u6a21\u5757\nrequire \"netdrv_device\"\n\n-- \u52a0\u8f7d\u4e32\u53e3\u5e94\u7528\u529f\u80fd\u6a21\u5757\nrequire \"uart_app\"\n-- \u52a0\u8f7d\u5b9a\u65f6\u5668\u5e94\u7528\u529f\u80fd\u6a21\u5757\nrequire \"timer_app\"\n\n-- \u52a0\u8f7dmqtt client \u4e3b\u5e94\u7528\u529f\u80fd\u6a21\u5757\nrequire \"mqtt_main\"\n\n-- \u52a0\u8f7dmqtt ssl client \u4e3b\u5e94\u7528\u529f\u80fd\u6a21\u5757\uff08mqtt ssl \u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\n-- require \"mqtts_main\"\n\n-- \u52a0\u8f7dmqtt ssl ca client \u4e3b\u5e94\u7528\u529f\u80fd\u6a21\u5757\uff08mqtt ssl \u5355\u5411\u8bc1\u4e66\u6821\u9a8c\uff09\n-- require \"mqtts_ca_main\"\n\n-- \u52a0\u8f7dmqtt ssl mutual ca client \u4e3b\u5e94\u7528\u529f\u80fd\u6a21\u5757\uff08mqtt ssl \u53cc\u5411\u8bc1\u4e66\u6821\u9a8c\uff09\n-- require \"mqtts_m_ca_main\"\n\n-- \u7528\u6237\u4ee3\u7801\u5df2\u7ed3\u675f---------------------------------------------\n-- \u7ed3\u5c3e\u603b\u662f\u8fd9\u4e00\u53e5\nsys.run()\n-- sys.run()\u4e4b\u540e\u4e0d\u8981\u52a0\u4efb\u4f55\u8bed\u53e5!!!!!\u56e0\u4e3a\u6dfb\u52a0\u7684\u4efb\u4f55\u8bed\u53e5\u90fd\u4e0d\u4f1a\u88ab\u6267\u884c\n</code></pre>"},{"location":"test/#62-netdrv","title":"6.2 \u7f51\u7edc\u9a71\u52a8 (<code>netdrv/</code>)","text":"<p>\u7f51\u7edc\u9a71\u52a8\u6a21\u5757\u8d1f\u8d23\u521d\u59cb\u5316\u548c\u7ba1\u7406\u4e0d\u540c\u7684\u7f51\u7edc\u8fde\u63a5\u65b9\u5f0f\uff0c\u5982 4G\u3001WIFI \u548c\u4ee5\u592a\u7f51\u3002</p>"},{"location":"test/#621-4g-netdrv_4glua","title":"6.2.1 4G \u7f51\u7edc\u9a71\u52a8 (<code>netdrv_4g.lua</code>)","text":"<ul> <li>\u76d1\u542c <code>IP_READY</code> \u548c <code>IP_LOSE</code> \u6d88\u606f\uff0c\u76d1\u63a7\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u3002</li> <li>\u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5361\u4e3a <code>socket.LWIP_GP</code>\u3002</li> </ul> <pre><code>--[[\n@module  netdrv_4g\n@summary \u201c4G\u7f51\u5361\u201d\u9a71\u52a8\u6a21\u5757\n@version 1.0\n@date    2025.07.01\n@author  \u9a6c\u68a6\u9633\n@usage\n\u672c\u6587\u4ef6\u4e3a4G\u7f51\u5361\u9a71\u52a8\u6a21\u5757\uff0c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u4e3a\uff1a\n1\u3001\u76d1\u542c\"IP_READY\"\u548c\"IP_LOSE\"\uff0c\u5728\u65e5\u5fd7\u4e2d\u8fdb\u884c\u6253\u5370\uff1b\n\n\u672c\u6587\u4ef6\u6ca1\u6709\u5bf9\u5916\u63a5\u53e3\uff0c\u76f4\u63a5\u5728\u5176\u4ed6\u529f\u80fd\u6a21\u5757\u4e2drequire \"netdrv_4g\"\u5c31\u53ef\u4ee5\u52a0\u8f7d\u8fd0\u884c\uff1b\n]]\n\nlocal function ip_ready_func(ip, adapter)\n    if adapter == socket.LWIP_GP then\n        log.info(\"netdrv_4g.ip_ready_func\", \"IP_READY\", socket.localIP(socket.LWIP_GP))\n    end\nend\n\nlocal function ip_lose_func(adapter)\n    if adapter == socket.LWIP_GP then\n        log.warn(\"netdrv_4g.ip_lose_func\", \"IP_LOSE\")\n    end\nend\n\n-- \u6b64\u5904\u8ba2\u9605\"IP_READY\"\u548c\"IP_LOSE\"\u4e24\u79cd\u6d88\u606f\n-- \u5728\u6d88\u606f\u7684\u5904\u7406\u51fd\u6570\u4e2d\uff0c\u4ec5\u4ec5\u6253\u5370\u4e86\u4e00\u4e9b\u4fe1\u606f\uff0c\u4fbf\u4e8e\u5b9e\u65f6\u89c2\u5bdf4G\u7f51\u7edc\u7684\u8fde\u63a5\u72b6\u6001\n-- \u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9879\u76ee\u9700\u6c42\uff0c\u5728\u6d88\u606f\u5904\u7406\u51fd\u6570\u4e2d\u589e\u52a0\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f91\u63a7\u5236\uff0c\u4f8b\u5982\u53ef\u4ee5\u5728\u8fde\u7f51\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\u66f4\u65b0\u7f51\u7edc\u56fe\u6807\nsys.subscribe(\"IP_READY\", ip_ready_func)\nsys.subscribe(\"IP_LOSE\", ip_lose_func)\n\n-- \u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5361\u4e3asocket.LWIP_GP\n-- \u5728Air8000\u4e0a\uff0c\u5185\u6838\u56fa\u4ef6\u8fd0\u884c\u8d77\u6765\u4e4b\u540e\uff0c\u9ed8\u8ba4\u7f51\u5361\u5c31\u662fsocket.LWIP_GP\n-- \u5728\u53554G\u7f51\u5361\u4f7f\u7528\u573a\u666f\u4e0b\uff0c\u4e0b\u9762\u8fd9\u4e00\u884c\u4ee3\u7801\u52a0\u4e0d\u52a0\u90fd\u6ca1\u6709\u5f71\u54cd\uff0c\u4e3a\u4e86\u548c\u5176\u4ed6\u7f51\u5361\u9a71\u52a8\u6a21\u5757\u7684\u4ee3\u7801\u98ce\u683c\u4fdd\u6301\u4e00\u81f4\uff0c\u6240\u4ee5\u52a0\u4e0a\u4e86\nsocket.dft(socket.LWIP_GP)\n</code></pre>"},{"location":"test/#622-wifi-netdrv_wifilua","title":"6.2.2 WIFI \u7f51\u7edc\u9a71\u52a8 (<code>netdrv_wifi.lua</code>)","text":"<ul> <li>\u521d\u59cb\u5316 WIFI \u6a21\u5757\uff0c\u8fde\u63a5\u6307\u5b9a\u7684\u70ed\u70b9\uff08\u9700\u8981\u4fee\u6539\u6210\u9700\u8981\u8fde\u63a5\u7684 WiFi \u70ed\u70b9\u540d\u79f0\u548c\u5bc6\u7801\uff0c\u5e76\u4e14\u662f 2.4G\uff0c\u4e0d\u652f\u6301 5G WiFi\uff09\u3002</li> <li>\u901a\u8fc7\u5c06 <code>wlan.connect(, , 1)</code> \u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u8bbe\u7f6e\u4e3a 1 \u4ee5\u5f00\u542f\u81ea\u52a8\u91cd\u8fde\u529f\u80fd\u3002</li> <li>\u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5361\u4e3a <code>socket.LWIP_STA</code>\u3002</li> </ul> <pre><code>--[[\n@module  netdrv_wifi\n@summary \u201cWIFI STA\u7f51\u5361\u201d\u9a71\u52a8\u6a21\u5757\n@version 1.0\n@date    2025.07.01\n@author  \u9a6c\u68a6\u9633\n@usage\n\u672c\u6587\u4ef6\u4e3aWIFI STA\u7f51\u5361\u9a71\u52a8\u6a21\u5757\uff0c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u4e3a\uff1a\n1\u3001\u521d\u59cb\u5316WIFI\u7f51\u7edc\uff1b\n2\u3001\u8fde\u63a5WIFI\u8def\u7531\u5668\uff1b\n3\u3001\u548cWIFI\u8def\u7531\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5728\u65e5\u5fd7\u4e2d\u8fdb\u884c\u6253\u5370\uff1b\n\n\u672c\u6587\u4ef6\u6ca1\u6709\u5bf9\u5916\u63a5\u53e3\uff0c\u76f4\u63a5\u5728\u5176\u4ed6\u529f\u80fd\u6a21\u5757\u4e2drequire \"netdrv_wifi\"\u5c31\u53ef\u4ee5\u52a0\u8f7d\u8fd0\u884c\uff1b\n]]\n\nlocal function ip_ready_func(ip, adapter)\n    if adapter == socket.LWIP_STA then\n        log.info(\"netdrv_wifi.ip_ready_func\", \"IP_READY\", json.encode(wlan.getInfo()))\n    end\nend\n\nlocal function ip_lose_func(adapter)\n    if adapter == socket.LWIP_STA then\n        log.warn(\"netdrv_wifi.ip_lose_func\", \"IP_LOSE\")\n    end\nend\n\n-- \u6b64\u5904\u8ba2\u9605\"IP_READY\"\u548c\"IP_LOSE\"\u4e24\u79cd\u6d88\u606f\n-- \u5728\u6d88\u606f\u7684\u5904\u7406\u51fd\u6570\u4e2d\uff0c\u4ec5\u4ec5\u6253\u5370\u4e86\u4e00\u4e9b\u4fe1\u606f\uff0c\u4fbf\u4e8e\u5b9e\u65f6\u89c2\u5bdfWIFI\u7684\u8fde\u63a5\u72b6\u6001\n-- \u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9879\u76ee\u9700\u6c42\uff0c\u5728\u6d88\u606f\u5904\u7406\u51fd\u6570\u4e2d\u589e\u52a0\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f91\u63a7\u5236\uff0c\u4f8b\u5982\u53ef\u4ee5\u5728\u8fde\u7f51\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\u66f4\u65b0\u7f51\u7edc\u56fe\u6807\nsys.subscribe(\"IP_READY\", ip_ready_func)\nsys.subscribe(\"IP_LOSE\", ip_lose_func)\n\n-- \u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5361\u4e3asocket.LWIP_STA\nsocket.dft(socket.LWIP_STA)\n\nwlan.init()\n-- \u8fde\u63a5WIFI\u70ed\u70b9\uff0c\u8fde\u63a5\u7ed3\u679c\u4f1a\u901a\u8fc7\"IP_READY\"\u6216\u8005\"IP_LOSE\"\u6d88\u606f\u901a\u77e5\n-- Air8000\u4ec5\u652f\u63012.4G\u7684WIFI\uff0c\u4e0d\u652f\u63015G\u7684WIFI\n-- \u6b64\u5904\u524d\u4e24\u4e2a\u53c2\u6570\u8868\u793aWIFI\u70ed\u70b9\u540d\u79f0\u4ee5\u53ca\u5bc6\u7801\uff0c\u66f4\u6362\u4e3a\u81ea\u5df1\u6d4b\u8bd5\u65f6\u7684\u771f\u5b9e\u53c2\u6570\u5373\u53ef\n-- \u7b2c\u4e09\u4e2a\u53c2\u65701\u8868\u793aWIFI\u8fde\u63a5\u5f02\u5e38\u65f6\uff0c\u5185\u6838\u56fa\u4ef6\u4f1a\u81ea\u52a8\u91cd\u8fde\nwlan.connect(\"\u8336\u5ba4-\u964d\u529f\u8017,\u627e\u5408\u5b99!\", \"Air123456\", 1)\n\n-- WIFI\u8054\u7f51\u6210\u529f\uff08\u505a\u4e3aSTATION\u6210\u529f\u8fde\u63a5AP\uff0c\u5e76\u4e14\u83b7\u53d6\u5230\u4e86IP\u5730\u5740\uff09\u540e\uff0c\u5185\u6838\u56fa\u4ef6\u4f1a\u4ea7\u751f\u4e00\u4e2a\"IP_READY\"\u6d88\u606f\n-- \u5404\u4e2a\u529f\u80fd\u6a21\u5757\u53ef\u4ee5\u8ba2\u9605\"IP_READY\"\u6d88\u606f\u5b9e\u65f6\u5904\u7406WIFI\u8054\u7f51\u6210\u529f\u7684\u4e8b\u4ef6\n-- \u4e5f\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u523b\u8c03\u7528socket.adapter(socket.LWIP_STA)\u6765\u83b7\u53d6WIFI\u7f51\u7edc\u662f\u5426\u8fde\u63a5\u6210\u529f\n\n-- WIFI\u65ad\u7f51\u540e\uff0c\u5185\u6838\u56fa\u4ef6\u4f1a\u4ea7\u751f\u4e00\u4e2a\"IP_LOSE\"\u6d88\u606f\n-- \u5404\u4e2a\u529f\u80fd\u6a21\u5757\u53ef\u4ee5\u8ba2\u9605\"IP_LOSE\"\u6d88\u606f\u5b9e\u65f6\u5904\u7406WIFI\u65ad\u7f51\u7684\u4e8b\u4ef6\n-- \u4e5f\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u523b\u8c03\u7528socket.adapter(socket.LWIP_STA)\u6765\u83b7\u53d6WIFI\u7f51\u7edc\u662f\u5426\u8fde\u63a5\u6210\u529f\n</code></pre>"},{"location":"test/#623-netdrv_eth_spilua","title":"6.2.3 \u4ee5\u592a\u7f51\u7f51\u7edc\u9a71\u52a8(<code>netdrv_eth_spi.lua</code>)","text":"<ul> <li>\u901a\u8fc7 SPI \u63a5\u53e3\u5916\u6302 CH390H \u82af\u7247\u5b9e\u73b0\u4ee5\u592a\u7f51\u3002</li> <li>\u901a\u8fc7\u63a7\u5236 GPIO140 \u5f15\u811a\u4f7f\u80fd\u82af\u7247\u4f9b\u7535\u3002</li> <li>\u914d\u7f6e SPI1 \u63a5\u53e3\u53c2\u6570\uff0c\u7528\u4e8e\u4e0e CH390H \u82af\u7247\u901a\u4fe1\u3002</li> <li>\u901a\u8fc7 <code>netdrv.setup</code> \u51fd\u6570\u914d\u7f6e\u4ee5\u592a\u7f51\u5361\uff0c\u5e76\u5f00\u542f DHCP \u52a8\u6001\u83b7\u53d6 IP \u5730\u5740\u3002</li> <li>\u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5361\u4e3a <code>socket.LWIP_ETH</code>\u3002</li> </ul> <pre><code>--[[\n@module  netdrv_eth_spi\n@summary \u201c\u901a\u8fc7SPI\u5916\u6302CH390H\u82af\u7247\u7684\u4ee5\u592a\u7f51\u5361\u201d\u9a71\u52a8\u6a21\u5757\n@version 1.0\n@date    2025.07.24\n@author  \u9a6c\u68a6\u9633\n@usage\n\u672c\u6587\u4ef6\u4e3a\u201c\u901a\u8fc7SPI\u5916\u6302CH390H\u82af\u7247\u7684\u4ee5\u592a\u7f51\u5361\u201d\u9a71\u52a8\u6a21\u5757\uff0c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u4e3a\uff1a\n1\u3001\u6253\u5f00CH390H\u82af\u7247\u4f9b\u7535\u5f00\u5173\uff1b\n2\u3001\u521d\u59cb\u5316spi1\uff0c\u521d\u59cb\u5316\u4ee5\u592a\u7f51\u5361\uff0c\u5e76\u4e14\u5728\u4ee5\u592a\u7f51\u5361\u4e0a\u5f00\u542fDHCP(\u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae)\uff1b\n3\u3001\u4ee5\u592a\u7f51\u5361\u7684\u8fde\u63a5\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5728\u65e5\u5fd7\u4e2d\u8fdb\u884c\u6253\u5370\uff1b\n\n\u76f4\u63a5\u4f7f\u7528Air8000\u5f00\u53d1\u677f\u786c\u4ef6\u6d4b\u8bd5\u5373\u53ef\uff1b\n\n\u672c\u6587\u4ef6\u6ca1\u6709\u5bf9\u5916\u63a5\u53e3\uff0c\u76f4\u63a5\u5728\u5176\u4ed6\u529f\u80fd\u6a21\u5757\u4e2drequire \"netdrv_eth_spi\"\u5c31\u53ef\u4ee5\u52a0\u8f7d\u8fd0\u884c\uff1b\n]]\n\nlocal function ip_ready_func(ip, adapter)\n    if adapter == socket.LWIP_ETH then\n        log.info(\"netdrv_eth_spi.ip_ready_func\", \"IP_READY\", socket.localIP(socket.LWIP_ETH))\n    end\nend\n\nlocal function ip_lose_func(adapter)\n    if adapter == socket.LWIP_ETH then\n        log.warn(\"netdrv_eth_spi.ip_lose_func\", \"IP_LOSE\")\n    end\nend\n\n-- \u6b64\u5904\u8ba2\u9605\"IP_READY\"\u548c\"IP_LOSE\"\u4e24\u79cd\u6d88\u606f\n-- \u5728\u6d88\u606f\u7684\u5904\u7406\u51fd\u6570\u4e2d\uff0c\u4ec5\u4ec5\u6253\u5370\u4e86\u4e00\u4e9b\u4fe1\u606f\uff0c\u4fbf\u4e8e\u5b9e\u65f6\u89c2\u5bdf\u201c\u901a\u8fc7SPI\u5916\u6302CH390H\u82af\u7247\u7684\u4ee5\u592a\u7f51\u5361\u201d\u7684\u8fde\u63a5\u72b6\u6001\n-- \u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9879\u76ee\u9700\u6c42\uff0c\u5728\u6d88\u606f\u5904\u7406\u51fd\u6570\u4e2d\u589e\u52a0\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f91\u63a7\u5236\uff0c\u4f8b\u5982\u53ef\u4ee5\u5728\u8fde\u7f51\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\u66f4\u65b0\u7f51\u7edc\u56fe\u6807\nsys.subscribe(\"IP_READY\", ip_ready_func)\nsys.subscribe(\"IP_LOSE\", ip_lose_func)\n\n-- \u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5361\u4e3asocket.LWIP_ETH\nsocket.dft(socket.LWIP_ETH)\n\n-- \u672cdemo\u6d4b\u8bd5\u4f7f\u7528\u7684\u662fAir8000\u5f00\u53d1\u677f\n-- GPIO140\u4e3aCH390H\u4ee5\u592a\u7f51\u82af\u7247\u7684\u4f9b\u7535\u4f7f\u80fd\u63a7\u5236\u5f15\u811a\ngpio.setup(140, 1, gpio.PULLUP)\n\n-- \u8fd9\u4e2atask\u7684\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u662f\uff1a\u521d\u59cb\u5316SPI\uff0c\u521d\u59cb\u5316\u4ee5\u592a\u7f51\u5361\uff0c\u5e76\u5728\u4ee5\u592a\u7f51\u5361\u4e0a\u5f00\u542f\u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae\nlocal function netdrv_eth_spi_task_func()\n    -- \u521d\u59cb\u5316SPI1\n    local result = spi.setup(\n        1,--spi_id\n        nil,\n        0,--CPHA\n        0,--CPOL\n        8,--\u6570\u636e\u5bbd\u5ea6\n        25600000--,--\u9891\u7387\n        -- spi.MSB,--\u9ad8\u4f4e\u4f4d\u987a\u5e8f    \u53ef\u9009\uff0c\u9ed8\u8ba4\u9ad8\u4f4d\u5728\u524d\n        -- spi.master,--\u4e3b\u6a21\u5f0f     \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3b\n        -- spi.full--\u5168\u53cc\u5de5       \u53ef\u9009\uff0c\u9ed8\u8ba4\u5168\u53cc\u5de5\n    )\n    log.info(\"netdrv_eth_spi\", \"spi open result\", result)\n    --\u8fd4\u56de\u503c\u4e3a0\uff0c\u8868\u793a\u6253\u5f00\u6210\u529f\n    if result ~= 0 then\n        log.error(\"netdrv_eth_spi\", \"spi open error\",result)\n        return\n    end\n\n    --\u521d\u59cb\u5316\u4ee5\u592a\u7f51\u5361\n\n    --\u4ee5\u592a\u7f51\u8054\u7f51\u6210\u529f\uff08\u6210\u529f\u8fde\u63a5\u8def\u7531\u5668\uff0c\u5e76\u4e14\u83b7\u53d6\u5230\u4e86IP\u5730\u5740\uff09\u540e\uff0c\u5185\u6838\u56fa\u4ef6\u4f1a\u4ea7\u751f\u4e00\u4e2a\"IP_READY\"\u6d88\u606f\n    --\u5404\u4e2a\u529f\u80fd\u6a21\u5757\u53ef\u4ee5\u8ba2\u9605\"IP_READY\"\u6d88\u606f\u5b9e\u65f6\u5904\u7406\u4ee5\u592a\u7f51\u8054\u7f51\u6210\u529f\u7684\u4e8b\u4ef6\n    --\u4e5f\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u523b\u8c03\u7528socket.adapter(socket.LWIP_ETH)\u6765\u83b7\u53d6\u4ee5\u592a\u7f51\u662f\u5426\u8fde\u63a5\u6210\u529f\n\n    --\u4ee5\u592a\u7f51\u65ad\u7f51\u540e\uff0c\u5185\u6838\u56fa\u4ef6\u4f1a\u4ea7\u751f\u4e00\u4e2a\"IP_LOSE\"\u6d88\u606f\n    --\u5404\u4e2a\u529f\u80fd\u6a21\u5757\u53ef\u4ee5\u8ba2\u9605\"IP_LOSE\"\u6d88\u606f\u5b9e\u65f6\u5904\u7406\u4ee5\u592a\u7f51\u65ad\u7f51\u7684\u4e8b\u4ef6\n    --\u4e5f\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u523b\u8c03\u7528socket.adapter(socket.LWIP_ETH)\u6765\u83b7\u53d6\u4ee5\u592a\u7f51\u662f\u5426\u8fde\u63a5\u6210\u529f\n\n    -- socket.LWIP_ETH \u6307\u5b9a\u7f51\u7edc\u9002\u914d\u5668\u7f16\u53f7\n    -- netdrv.CH390\u5916\u6302CH390\n    -- SPI ID 1, \u7247\u9009 GPIO12\n    netdrv.setup(socket.LWIP_ETH, netdrv.CH390, {spi=1, cs=12})\n\n    -- \u5728\u4ee5\u592a\u7f51\u4e0a\u5f00\u542f\u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae\n    netdrv.dhcp(socket.LWIP_ETH, true)\nend\n\n-- \u521b\u5efa\u5e76\u4e14\u542f\u52a8\u4e00\u4e2atask\n-- task\u7684\u5904\u7406\u51fd\u6570\u4e3anetdrv_eth_spi_task_func\nsys.taskInit(netdrv_eth_spi_task_func)\n</code></pre>"},{"location":"test/#624-netdrv_multiplelua","title":"6.2.4 \u591a\u7f51\u7edc\u9a71\u52a8\u7ba1\u7406 (<code>netdrv_multiple.lua</code>)","text":"<ul> <li>\u7ba1\u7406\u591a\u4e2a\u7f51\u7edc\u9a71\u52a8\u5b9e\u4f8b\uff0c\u6839\u636e\u914d\u7f6e\u9009\u62e9\u5408\u9002\u7684\u7f51\u7edc\u8fde\u63a5\u65b9\u5f0f\u3002</li> <li>\u901a\u8fc7 <code>exnetif.set_priority_order</code> \u51fd\u6570\u914d\u7f6e\u591a\u7f51\u5361\u7684\u63a7\u5236\u53c2\u6570\u4ee5\u53ca\u4f18\u5148\u7ea7\u3002</li> <li>\u901a\u8fc7 <code>exnetif.notify_status</code> \u51fd\u6570\u8bbe\u7f6e\u7f51\u5361\u72b6\u6001\u53d8\u5316\u901a\u77e5\u56de\u8c03\u51fd\u6570\u3002</li> </ul> <pre><code>--[[\n@module  netdrv_multiple\n@summary \u591a\u7f51\u5361\uff084G\u7f51\u5361\u3001WIFI STA\u7f51\u5361\u3001\u901a\u8fc7SPI\u5916\u6302CH390H\u82af\u7247\u7684\u4ee5\u592a\u7f51\u5361\uff09\u9a71\u52a8\u6a21\u5757\n@version 1.0\n@date    2025.07.24\n@author  \u9a6c\u68a6\u9633\n@usage\n\u672c\u6587\u4ef6\u4e3a\u591a\u7f51\u5361\u9a71\u52a8\u6a21\u5757\uff0c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u4e3a\uff1a\n1\u3001\u8c03\u7528exnetif.set_priority_order\u914d\u7f6e\u591a\u7f51\u5361\u7684\u63a7\u5236\u53c2\u6570\u4ee5\u53ca\u4f18\u5148\u7ea7\uff1b\n\n\u76f4\u63a5\u4f7f\u7528Air8000\u5f00\u53d1\u677f\u786c\u4ef6\u6d4b\u8bd5\u5373\u53ef\uff1b\n\n\u672c\u6587\u4ef6\u6ca1\u6709\u5bf9\u5916\u63a5\u53e3\uff0c\u76f4\u63a5\u5728\u5176\u4ed6\u529f\u80fd\u6a21\u5757\u4e2drequire \"netdrv_multiple\"\u5c31\u53ef\u4ee5\u52a0\u8f7d\u8fd0\u884c\uff1b\n]]\n\nlocal exnetif = require \"exnetif\"\n\n-- \u7f51\u5361\u72b6\u6001\u53d8\u5316\u901a\u77e5\u56de\u8c03\u51fd\u6570\n-- \u5f53exnetif\u4e2d\u68c0\u6d4b\u5230\u7f51\u5361\u5207\u6362\u6216\u8005\u6240\u6709\u7f51\u5361\u90fd\u65ad\u7f51\u65f6\uff0c\u4f1a\u89e6\u53d1\u8c03\u7528\u6b64\u56de\u8c03\u51fd\u6570\n-- \u5f53\u7f51\u5361\u5207\u6362\u5207\u6362\u65f6\uff1a\n--     net_type\uff1astring\u7c7b\u578b\uff0c\u8868\u793a\u5f53\u524d\u4f7f\u7528\u7684\u7f51\u5361\u5b57\u7b26\u4e32\n--     adapter\uff1anumber\u7c7b\u578b\uff0c\u8868\u793a\u5f53\u524d\u4f7f\u7528\u7684\u7f51\u5361id\n-- \u5f53\u6240\u6709\u7f51\u5361\u65ad\u7f51\u65f6\uff1a\n--     net_type\uff1a\u4e3anil\n--     adapter\uff1anumber\u7c7b\u578b\uff0c\u4e3a-1\nlocal function netdrv_multiple_notify_cbfunc(net_type,adapter)\n    if type(net_type)==\"string\" then\n        log.info(\"netdrv_multiple_notify_cbfunc\", \"use new adapter\", net_type, adapter)\n    elseif type(net_type)==\"nil\" then\n        log.warn(\"netdrv_multiple_notify_cbfunc\", \"no available adapter\", net_type, adapter)\n    else\n        log.warn(\"netdrv_multiple_notify_cbfunc\", \"unknown status\", net_type, adapter)\n    end\nend\n\nlocal function netdrv_multiple_task_func()\n    --\u8bbe\u7f6e\u7f51\u5361\u4f18\u5148\u7ea7\n    exnetif.set_priority_order(\n        {\n            -- \u201c\u901a\u8fc7SPI\u5916\u6302CH390H\u82af\u7247\u201d\u7684\u4ee5\u592a\u7f51\u5361\uff0c\u4f7f\u7528Air8000\u5f00\u53d1\u677f\u9a8c\u8bc1\n            {\n                ETHERNET = {\n                    -- \u4f9b\u7535\u4f7f\u80fdGPIO\n                    pwrpin = 140,\n                    -- \u8bbe\u7f6e\u7684\u591a\u4e2a\u201c\u5df2\u7ecfIP READY\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709ping\u901a\u201d\u7f51\u5361\uff0c\u5faa\u73af\u6267\u884cping\u52a8\u4f5c\u7684\u95f4\u9694\uff08\u5355\u4f4d\u6beb\u79d2\uff0c\u53ef\u9009\uff09\n                    -- \u5982\u679c\u6ca1\u6709\u4f20\u5165\u6b64\u53c2\u6570\uff0cexnetif\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u503c10\u79d2\n                    ping_time = 3000,\n\n                    -- \u8fde\u901a\u6027\u68c0\u6d4bip(\u9009\u586b\u53c2\u6570)\uff1b\n                    -- \u5982\u679c\u6ca1\u6709\u4f20\u5165ip\u5730\u5740\uff0cexnetif\u4e2d\u4f1a\u9ed8\u8ba4\u4f7f\u7528httpdns\u80fd\u5426\u6210\u529f\u83b7\u53d6baidu.com\u7684ip\u4f5c\u4e3a\u662f\u5426\u8fde\u901a\u7684\u5224\u65ad\u6761\u4ef6\uff1b\n                    -- \u5982\u679c\u4f20\u5165\uff0c\u4e00\u5b9a\u8981\u4f20\u5165\u53ef\u9760\u7684\u5e76\u4e14\u53ef\u4ee5ping\u901a\u7684ip\u5730\u5740\uff1b\n                    -- ping_ip = \"\u586b\u5165\u53ef\u9760\u7684\u5e76\u4e14\u53ef\u4ee5ping\u901a\u7684ip\u5730\u5740\",\n\n                    -- \u7f51\u5361\u82af\u7247\u578b\u53f7(\u9009\u586b\u53c2\u6570)\uff0c\u4ec5spi\u65b9\u5f0f\u5916\u6302\u4ee5\u592a\u7f51\u65f6\u9700\u8981\u586b\u5199\u3002\n                    tp = netdrv.CH390,\n                    opts = {spi=1, cs=12}\n                }\n            },\n\n            -- WIFI STA\u7f51\u5361\n            {\n                WIFI = {\n                    -- \u8981\u8fde\u63a5\u7684WIFI\u8def\u7531\u5668\u540d\u79f0\n                    ssid = \"\u8336\u5ba4-\u964d\u529f\u8017,\u627e\u5408\u5b99!\",\n                    -- \u8981\u8fde\u63a5\u7684WIFI\u8def\u7531\u5668\u5bc6\u7801\n                    password = \"Air123456\",\n\n                    -- \u8fde\u901a\u6027\u68c0\u6d4bip(\u9009\u586b\u53c2\u6570)\uff1b\n                    -- \u5982\u679c\u6ca1\u6709\u4f20\u5165ip\u5730\u5740\uff0cexnetif\u4e2d\u4f1a\u9ed8\u8ba4\u4f7f\u7528httpdns\u80fd\u5426\u6210\u529f\u83b7\u53d6baidu.com\u7684ip\u4f5c\u4e3a\u662f\u5426\u8fde\u901a\u7684\u5224\u65ad\u6761\u4ef6\uff1b\n                    -- \u5982\u679c\u4f20\u5165\uff0c\u4e00\u5b9a\u8981\u4f20\u5165\u53ef\u9760\u7684\u5e76\u4e14\u53ef\u4ee5ping\u901a\u7684ip\u5730\u5740\uff1b\n                    -- ping_ip = \"\u586b\u5165\u53ef\u9760\u7684\u5e76\u4e14\u53ef\u4ee5ping\u901a\u7684ip\u5730\u5740\",\n                }\n            },\n\n            -- 4G\u7f51\u5361\n            {\n                LWIP_GP = true\n            }\n        }\n    )\nend\n\n-- \u8bbe\u7f6e\u7f51\u5361\u72b6\u6001\u53d8\u5316\u901a\u77e5\u56de\u8c03\u51fd\u6570netdrv_multiple_notify_cbfunc\nexnetif.notify_status(netdrv_multiple_notify_cbfunc)\n\n-- \u5982\u679c\u5b58\u5728udp\u7f51\u7edc\u5e94\u7528\uff0c\u5e76\u4e14udp\u7f51\u7edc\u5e94\u7528\u4e2d\uff0c\u6839\u636e\u5e94\u7528\u5c42\u7684\u5fc3\u8df3\u80fd\u591f\u5224\u65ad\u51fa\u6765udp\u6570\u636e\u901a\u4fe1\u51fa\u73b0\u4e86\u5f02\u5e38\uff1b\n-- \u53ef\u4ee5\u5728\u5224\u65ad\u51fa\u73b0\u5f02\u5e38\u7684\u4f4d\u7f6e\uff0c\u8c03\u7528\u4e00\u6b21exnetif.check_network_status()\u63a5\u53e3\uff0c\u5f3a\u5236\u5bf9\u5f53\u524d\u6b63\u5f0f\u4f7f\u7528\u7684\u7f51\u5361\u8fdb\u884c\u4e00\u6b21\u8fde\u901a\u6027\u68c0\u6d4b\uff1b\n-- \u5982\u679c\u5b58\u5728tcp\u7f51\u7edc\u5e94\u7528\uff0c\u4e0d\u9700\u8981\u7528\u6237\u8c03\u7528exnetif.check_network_status()\u63a5\u53e3\u53bb\u63a7\u5236\uff0cexnetif\u4f1a\u5728tcp\u7f51\u7edc\u5e94\u7528\u901a\u4fe1\u5f02\u5e38\u65f6\u81ea\u52a8\u5bf9\u5f53\u524d\u4f7f\u7528\u7684\u7f51\u5361\u8fdb\u884c\u8fde\u901a\u6027\u68c0\u6d4b\u3002\n\n-- \u542f\u52a8\u4e00\u4e2atask\uff0ctask\u7684\u5904\u7406\u51fd\u6570\u4e3anetdrv_multiple_task_func\n-- \u5728\u5904\u7406\u51fd\u6570\u4e2d\u8c03\u7528exnetif.set_priority_order\u8bbe\u7f6e\u7f51\u5361\u4f18\u5148\u7ea7\n-- \u56e0\u4e3aexnetif.set_priority_order\u8981\u6c42\u5fc5\u987b\u5728task\u4e2d\u88ab\u8c03\u7528\uff0c\u6240\u4ee5\u6b64\u5904\u542f\u52a8\u4e00\u4e2atask\nsys.taskInit(netdrv_multiple_task_func)\n</code></pre>"},{"location":"test/#63-mqtt-mqtt-mqtts-mqtts_ca-mqtts_mutual_ca","title":"6.3 MQTT \u5ba2\u6237\u7aef (<code>mqtt/</code>, <code>mqtts/</code>, <code>mqtts_ca/</code>, <code>mqtts_mutual_ca/</code>)","text":"<p>\u6bcf\u4e2a MQTT \u5ba2\u6237\u7aef\u76ee\u5f55\u90fd\u5305\u542b\u4e09\u4e2a\u6838\u5fc3\u6587\u4ef6\uff1a<code>_main.lua</code>\u3001<code>_receiver.lua</code> \u548c <code>_sender.lua</code>\uff0c\u5206\u522b\u8d1f\u8d23\u5ba2\u6237\u7aef\u7684\u521d\u59cb\u5316\u3001\u6570\u636e\u63a5\u6536\u548c\u6570\u636e\u53d1\u9001\u3002</p>"},{"location":"test/#631-_mainlua","title":"6.3.1 \u5ba2\u6237\u7aef\u521d\u59cb\u5316 (<code>_main.lua</code>)","text":"<p>\u6ce8\u610f\uff1a\u4ee3\u7801\u4e2d\u7684 mqtt \u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u4f1a\u4e0d\u5b9a\u671f\u91cd\u542f\u6216\u7ef4\u62a4\uff0c\u4ec5\u80fd\u7528\u4f5c\u6d4b\u8bd5\u7528\u9014\uff0c\u4e0d\u53ef\u5546\u7528\uff0c\u8bf4\u4e0d\u5b9a\u54ea\u4e00\u5929\u5c31\u5173\u95ed\u4e86\u3002\u7528\u6237\u5f00\u53d1\u9879\u76ee\u65f6\uff0c\u9700\u8981\u66ff\u6362\u4e3a\u81ea\u5df1\u7684\u5546\u7528\u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u3002</p> <ul> <li>\u521b\u5efa MQTT \u5ba2\u6237\u7aef\u5bf9\u8c61\uff0c\u914d\u7f6e\u670d\u52a1\u5668\u5730\u5740\u3001\u7aef\u53e3\u3001\u5ba2\u6237\u7aef ID\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u7b49\u53c2\u6570\u3002</li> <li>\u8bbe\u7f6e\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\uff0c\u5904\u7406\u8fde\u63a5\u3001\u8ba2\u9605\u3001\u63a5\u6536\u548c\u5f02\u5e38\u7b49\u4e8b\u4ef6\u3002</li> <li>\u542f\u52a8\u5ba2\u6237\u7aef\u4efb\u52a1\uff0c\u5f00\u59cb\u8fde\u63a5 MQTT \u670d\u52a1\u5668\u3002</li> </ul>"},{"location":"test/#632-_receiverlua","title":"6.3.2 \u6570\u636e\u63a5\u6536 (<code>_receiver.lua</code>)","text":"<ul> <li>\u5b9e\u73b0 <code>proc</code> \u51fd\u6570\uff0c\u5904\u7406\u63a5\u6536\u5230\u7684\u6570\u636e\u3002</li> <li>\u6253\u5370\u63a5\u6536\u5230\u7684\u6570\u636e\u5185\u5bb9\u3002</li> <li>\u901a\u8fc7 <code>sys.publish(\"FEED_NETWORK_WATCHDOG\")</code> \u89e6\u53d1\u7f51\u7edc\u770b\u95e8\u72d7\u5582\u72d7\u3002</li> </ul>"},{"location":"test/#633-_senderlua","title":"6.3.3 \u6570\u636e\u53d1\u9001 (<code>_sender.lua</code>)","text":"<ul> <li>\u5b9e\u73b0 <code>send</code> \u51fd\u6570\uff0c\u5c06\u6570\u636e\u6dfb\u52a0\u5230\u53d1\u9001\u961f\u5217\u3002</li> <li>\u7ba1\u7406\u53d1\u9001\u961f\u5217\uff0c\u6309\u987a\u5e8f\u53d1\u9001\u6570\u636e\u3002</li> <li>\u652f\u6301 QoS \u914d\u7f6e\u548c\u53d1\u9001\u7ed3\u679c\u56de\u8c03\u3002</li> </ul>"},{"location":"test/#64-timer_applua-uart_applua","title":"6.4 \u5e94\u7528\u529f\u80fd (<code>timer_app.lua</code>, <code>uart_app.lua</code>)","text":"<p>\u5e94\u7528\u529f\u80fd\u6a21\u5757\u8d1f\u8d23\u751f\u6210\u6d4b\u8bd5\u6570\u636e\u548c\u5904\u7406\u4e32\u53e3\u901a\u4fe1\u3002</p>"},{"location":"test/#641-timer_applua","title":"6.4.1 \u5b9a\u65f6\u5668\u5e94\u7528 (<code>timer_app.lua</code>)","text":"<ul> <li>\u521b\u5efa\u4e00\u4e2a 5 \u79d2\u5faa\u73af\u7684\u5b9a\u65f6\u5668\u3002</li> <li>\u5b9a\u65f6\u751f\u6210\u9012\u589e\u7684\u6d4b\u8bd5\u6570\u636e\u3002</li> <li>\u901a\u8fc7 <code>sys.publish(\"SEND_DATA_REQ\", data)</code> \u53d1\u5e03\u53d1\u9001\u8bf7\u6c42\u6d88\u606f\u3002</li> <li>\u5b9e\u73b0\u53d1\u9001\u7ed3\u679c\u56de\u8c03\uff0c\u6839\u636e\u53d1\u9001\u7ed3\u679c\u51b3\u5b9a\u662f\u5426\u91cd\u53d1\u6570\u636e\u3002</li> </ul> <pre><code>--[[\n@module  timer_app\n@summary \u5b9a\u65f6\u5668\u5e94\u7528\u529f\u80fd\u6a21\u5757\n@version 1.0\n@date    2025.07.01\n@author  \u9a6c\u68a6\u9633\n@usage\n\u672c\u6587\u4ef6\u4e3a\u5b9a\u65f6\u5668\u5e94\u7528\u529f\u80fd\u6a21\u5757\uff0c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u4e3a\uff1a\n\u521b\u5efa\u4e00\u4e2a5\u79d2\u7684\u5faa\u73af\u5b9a\u65f6\u5668\uff0c\u6bcf\u6b21\u4ea7\u751f\u4e00\u6bb5\u6570\u636e\uff0c\u901a\u77e5\u56db\u4e2amqtt client\u8fdb\u884c\u5904\u7406\uff1b\n\n\u672c\u6587\u4ef6\u7684\u5bf9\u5916\u63a5\u53e3\u6709\u4e00\u4e2a\uff1a\n1\u3001sys.publish(\"SEND_DATA_REQ\", \"timer\", mobile.imei()..\"/timer/up\", payload, 0, {func=send_data_cbfunc, para=\"timer\"..payload})\n   \u901a\u8fc7publish\u901a\u77e5\u56db\u8defmqtt client\u6570\u636e\u53d1\u9001\u529f\u80fd\u6a21\u5757publish\u6570\u636e;\n   \u6570\u636e\u53d1\u9001\u7ed3\u679c\u901a\u8fc7\u6267\u884c\u56de\u8c03\u51fd\u6570send_data_cbfunc\u901a\u77e5\u672c\u529f\u80fd\u6a21\u5757\uff1b\n]]\n\nlocal payload = 1\n\n-- \u6570\u636e\u53d1\u9001\u7ed3\u679c\u56de\u8c03\u51fd\u6570\n-- result\uff1a\u53d1\u9001\u7ed3\u679c\uff0ctrue\u4e3a\u53d1\u9001\u6210\u529f\uff0cfalse\u4e3a\u53d1\u9001\u5931\u8d25\n-- para\uff1a\u56de\u8c03\u53c2\u6570\uff0csys.publish(\"SEND_DATA_REQ\", \"timer\", mobile.imei()..\"/timer/up\", payload, 0, {func=send_data_cbfunc, para=\"timer\"..payload})\u4e2d\u643a\u5e26\u7684para\nlocal function send_data_cbfunc(result, para)\n    log.info(\"send_data_cbfunc\", result, para)\n    -- \u65e0\u8bba\u4e0a\u4e00\u6b21\u53d1\u9001\u6210\u529f\u8fd8\u662f\u5931\u8d25\uff0c\u542f\u52a8\u4e00\u4e2a5\u79d2\u7684\u5b9a\u65f6\u5668\uff0c5\u79d2\u540e\u53d1\u9001\u4e0b\u6b21\u6570\u636e\n    sys.timerStart(send_data_req_timer_cbfunc, 5000)\nend\n\n-- \u5b9a\u65f6\u5668\u56de\u8c03\u51fd\u6570\nfunction send_data_req_timer_cbfunc()\n    -- \u53d1\u5e03\u6d88\u606f\"SEND_DATA_REQ\"\n    -- \u643a\u5e26\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\"timer\"\u8868\u793a\u662f\u5b9a\u65f6\u5668\u5e94\u7528\u6a21\u5757\u53d1\u5e03\u7684\u6d88\u606f\n    -- \u643a\u5e26\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570mobile.imei()..\"/timer/up\"\u4e3a\u8981publish\u7684topic\n    -- \u643a\u5e26\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570payload\u4e3a\u8981publish\u7684payload\n    -- \u643a\u5e26\u7684\u7b2c\u56db\u4e2a\u53c2\u65700\u4e3apublish\u7684qos\n    -- \u643a\u5e26\u7684\u7b2c\u4e94\u4e2a\u53c2\u6570cb\u4e3a\u53d1\u9001\u7ed3\u679c\u56de\u8c03(\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u5982\u679c\u4e3a\u7a7a\uff0c\u8868\u793a\u4e0d\u5173\u5fc3mqtt client\u53d1\u9001\u6570\u636e\u6210\u529f\u8fd8\u662f\u5931\u8d25)\uff0c\u5176\u4e2d\uff1a\n    --       cb.func\u4e3a\u56de\u8c03\u51fd\u6570(\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u5982\u679c\u4e3a\u7a7a\uff0c\u8868\u793a\u4e0d\u5173\u5fc3mqtt client\u53d1\u9001\u6570\u636e\u6210\u529f\u8fd8\u662f\u5931\u8d25)\n    --       cb.para\u4e3a\u56de\u8c03\u51fd\u6570\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570(\u53ef\u4ee5\u4e3a\u7a7a)\uff0c\u56de\u8c03\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u53d1\u9001\u7ed3\u679c(true\u8868\u793a\u6210\u529f\uff0cfalse\u8868\u793a\u5931\u8d25)\n    sys.publish(\"SEND_DATA_REQ\", \"timer\", mobile.imei()..\"/timer/up\", payload, 0, {func=send_data_cbfunc, para=\"timer\"..payload})\n    payload = payload+1\nend\n\n-- \u542f\u52a8\u4e00\u4e2a5\u79d2\u7684\u5355\u6b21\u5b9a\u65f6\u5668\n-- \u65f6\u95f4\u5230\u8fbe\u540e\uff0c\u6267\u884c\u4e00\u6b21send_data_req_timer_cbfunc\u51fd\u6570\nsys.timerStart(send_data_req_timer_cbfunc, 5000)\n</code></pre>"},{"location":"test/#642-uart_applua","title":"6.4.2 \u4e32\u53e3\u5e94\u7528 (<code>uart_app.lua</code>)","text":"<ul> <li>\u914d\u7f6e UART1\uff0c\u6ce2\u7279\u7387\u4e3a 115200\u3002</li> <li>\u63a5\u6536\u6765\u81ea PC \u7684\u6570\u636e\uff0c\u5e76\u901a\u8fc7 MQTT \u53d1\u9001\u3002</li> <li>\u5c06 MQTT \u63a5\u6536\u5230\u7684\u6570\u636e\u901a\u8fc7\u4e32\u53e3\u8f93\u51fa\u5230 PC\u3002</li> <li>\u5b9e\u73b0\u6570\u636e\u7f13\u51b2\u548c\u8d85\u65f6\u5904\u7406\u3002</li> </ul> <pre><code>--[[\n@module  uart_app\n@summary \u4e32\u53e3\u5e94\u7528\u529f\u80fd\u6a21\u5757\n@version 1.0\n@date    2025.07.28\n@author  \u9a6c\u68a6\u9633\n@usage\n\u672c\u6587\u4ef6\u4e3a\u4e32\u53e3\u5e94\u7528\u529f\u80fd\u6a21\u5757\uff0c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u4e3a\uff1a\n1\u3001\u6253\u5f00uart1\uff0c\u6ce2\u7279\u7387115200\uff0c\u6570\u636e\u4f4d8\uff0c\u505c\u6b62\u4f4d1\uff0c\u65e0\u5947\u5076\u6821\u9a8c\u4f4d\uff1b\n2\u3001uart1\u548cpc\u7aef\u7684\u4e32\u53e3\u5de5\u5177\u76f8\u8fde\uff1b\n3\u3001\u4eceuart1\u63a5\u6536\u5230pc\u7aef\u4e32\u53e3\u5de5\u5177\u53d1\u9001\u7684\u6570\u636e\u540e\uff0c\u901a\u77e5\u56db\u4e2amqtt client\u8fdb\u884c\u5904\u7406\uff1b\n4\u3001\u6536\u5230\u56db\u4e2amqtt client\u4ecesocket server\u63a5\u6536\u5230\u7684\u6570\u636e\u540e\uff0c\u5c06\u6570\u636e\u901a\u8fc7uart1\u53d1\u9001\u5230pc\u7aef\u4e32\u53e3\u5de5\u5177\uff1b\n\n\u672c\u6587\u4ef6\u7684\u5bf9\u5916\u63a5\u53e3\u6709\u4e24\u4e2a\uff1a\n1\u3001sys.publish(\"SEND_DATA_REQ\", \"uart\", mobile.imei()..\"/uart/up\", read_buf, 1)\n   \u901a\u77e5mqtt client\u6570\u636e\u53d1\u9001\u6a21\u5757\uff0c\u5728mobile.imei()..\"/uart/up\"\u7684topic\u4e0apublish\u6570\u636eread_buf\uff0c\u4e0d\u5173\u5fc3\u6570\u636e\u53d1\u9001\u6210\u529f\u8fd8\u662f\u5931\u8d25\uff1b\n2\u3001sys.subscribe(\"RECV_DATA_FROM_SERVER\", recv_data_from_server_proc)\uff0c\u8ba2\u9605RECV_DATA_FROM_SERVER\u6d88\u606f\uff0c\u5904\u7406\u6d88\u606f\u643a\u5e26\u7684\u6570\u636e\uff1b\n]]\n\n-- \u4f7f\u7528UART1\nlocal UART_ID = 1\n-- \u4e32\u53e3\u63a5\u6536\u6570\u636e\u7f13\u51b2\u533a\nlocal read_buf = \"\"\n\n-- \u5c06\u524d\u7f00prefix\u548ctopic\uff0cpayload\u6570\u636e\u62fc\u63a5\n-- \u7136\u540e\u672b\u5c3e\u589e\u52a0\u56de\u8f66\u6362\u884c\u4e24\u4e2a\u5b57\u7b26\uff0c\u901a\u8fc7uart\u53d1\u9001\u51fa\u53bb\uff0c\u65b9\u4fbf\u5728PC\u7aef\u6362\u884c\u663e\u793a\u67e5\u770b\nlocal function recv_data_from_server_proc(prefix, topic, payload)\n    uart.write(UART_ID, prefix..topic..\",\"..payload..\"\\r\\n\")\nend\n\nlocal function concat_timeout_func()\n    -- \u5982\u679c\u5b58\u5728\u5c1a\u672a\u5904\u7406\u7684\u4e32\u53e3\u7f13\u51b2\u533a\u6570\u636e\uff1b\n    -- \u5c06\u6570\u636e\u901a\u8fc7publish\u901a\u77e5\u5176\u4ed6\u5e94\u7528\u529f\u80fd\u6a21\u5757\u5904\u7406\uff1b\n    -- \u7136\u540e\u6e05\u7a7a\u672c\u6587\u4ef6\u7684\u4e32\u53e3\u7f13\u51b2\u533a\u6570\u636e\n    if read_buf:len() &gt; 0 then\n        sys.publish(\"SEND_DATA_REQ\", \"uart\", mobile.imei()..\"/uart/up\", read_buf, 1)\n        read_buf = \"\"\n    end\nend\n\n-- UART1\u7684\u6570\u636e\u63a5\u6536\u4e2d\u65ad\u5904\u7406\u51fd\u6570\uff0cUART1\u63a5\u6536\u5230\u6570\u636e\u65f6\uff0c\u4f1a\u6267\u884c\u6b64\u51fd\u6570\nlocal function read()\n    local s\n    while true do\n        -- \u975e\u963b\u585e\u8bfb\u53d6UART1\u63a5\u6536\u5230\u7684\u6570\u636e\uff0c\u6700\u957f\u8bfb\u53d61024\u5b57\u8282\n        s = uart.read(UART_ID, 1024)\n\n        -- \u5982\u679c\u4ece\u4e32\u53e3\u6ca1\u6709\u8bfb\u5230\u6570\u636e\n        if not s or s:len() == 0 then\n            -- \u542f\u52a850\u6beb\u79d2\u7684\u5b9a\u65f6\u5668\uff0c\u5982\u679c50\u6beb\u79d2\u5185\u6ca1\u6536\u5230\u65b0\u7684\u6570\u636e\uff0c\u5219\u5904\u7406\u5f53\u524d\u6536\u5230\u7684\u6240\u6709\u6570\u636e\n            -- \u8fd9\u6837\u5904\u7406\u662f\u4e3a\u4e86\u9632\u6b62\u5c06\u4e00\u5927\u5305\u6570\u636e\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u5305\u6765\u5904\u7406\n            -- \u4f8b\u5982pc\u7aef\u4e32\u53e3\u5de5\u5177\u4e0b\u53d11100\u5b57\u8282\u7684\u6570\u636e\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u5c06\u8fd120\u6b21\u7684\u4e2d\u65ad\u8fdb\u5165\u5230read\u51fd\u6570\uff0c\u624d\u80fd\u8bfb\u53d6\u5b8c\u6574\n            -- \u6b64\u5904\u768450\u6beb\u79d2\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u9879\u76ee\u7684\u9700\u6c42\u505a\u9002\u5f53\u4fee\u6539\uff0c\u5728\u6ee1\u8db3\u6574\u5305\u62fc\u63a5\u5b8c\u6574\u7684\u524d\u63d0\u4e0b\uff0c\u65f6\u95f4\u8d8a\u77ed\uff0c\u5904\u7406\u8d8a\u53ca\u65f6\n            sys.timerStart(concat_timeout_func, 50)\n            -- \u8df3\u51fa\u5faa\u73af\uff0c\u9000\u51fa\u672c\u51fd\u6570\n            break\n        end\n\n        log.info(\"uart_app.read len\", s:len())\n        -- log.info(\"uart_app.read\", s)\n\n        -- \u5c06\u672c\u6b21\u4ece\u4e32\u53e3\u8bfb\u5230\u7684\u6570\u636e\u62fc\u63a5\u5230\u4e32\u53e3\u7f13\u51b2\u533aread_buf\u4e2d\n        read_buf = read_buf..s\n    end\nend\n\n-- \u521d\u59cb\u5316UART1\uff0c\u6ce2\u7279\u7387115200\uff0c\u6570\u636e\u4f4d8\uff0c\u505c\u6b62\u4f4d1\nuart.setup(UART_ID, 115200, 8, 1)\n\n-- \u6ce8\u518cUART1\u7684\u6570\u636e\u63a5\u6536\u4e2d\u65ad\u5904\u7406\u51fd\u6570\uff0cUART1\u63a5\u6536\u5230\u6570\u636e\u65f6\uff0c\u4f1a\u6267\u884cread\u51fd\u6570\nuart.on(UART_ID, \"receive\", read)\n\n-- \u8ba2\u9605\"RECV_DATA_FROM_SERVER\"\u6d88\u606f\u7684\u5904\u7406\u51fd\u6570recv_data_from_server_proc\n-- \u6536\u5230\"RECV_DATA_FROM_SERVER\"\u6d88\u606f\u540e\uff0c\u4f1a\u6267\u884c\u51fd\u6570recv_data_from_server_proc\nsys.subscribe(\"RECV_DATA_FROM_SERVER\", recv_data_from_server_proc)\n</code></pre>"},{"location":"test/#65-network_watchdoglua","title":"6.5 \u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7 (<code>network_watchdog.lua</code>)","text":"<p>\u7f51\u7edc\u770b\u95e8\u72d7\u6a21\u5757\u8d1f\u8d23\u76d1\u63a7\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u548c\u6570\u636e\u6536\u53d1\u60c5\u51b5\uff0c\u786e\u4fdd\u7cfb\u7edf\u5728\u7f51\u7edc\u5f02\u5e38\u65f6\u80fd\u591f\u81ea\u52a8\u6062\u590d\u3002</p>"},{"location":"test/#651","title":"6.5.1 \u8bbe\u8ba1\u539f\u5219","text":"<ul> <li>\u770b\u95e8\u72d7\u8d85\u65f6\u65f6\u95f4\u5e94\u5927\u4e8e\u4efb\u610f\u4e00\u4e2a MQTT \u8fde\u63a5\u7684\u53d1\u9001\u95f4\u9694\u3002</li> <li>\u901a\u8fc7\u63a5\u6536 <code>FEED_NETWORK_WATCHDOG</code> \u6d88\u606f\u6765\u5582\u72d7\u3002</li> <li>\u8d85\u65f6\u672a\u6536\u5230\u5582\u72d7\u6d88\u606f\u65f6\uff0c\u7cfb\u7edf\u81ea\u52a8\u91cd\u542f\u3002</li> </ul>"},{"location":"test/#652","title":"6.5.2 \u5b9e\u73b0\u7ec6\u8282","text":"<ul> <li>\u521b\u5efa <code>network_watchdog_task_func</code> \u4efb\u52a1\u51fd\u6570\u3002</li> <li>\u4efb\u52a1\u51fd\u6570\u5faa\u73af\u7b49\u5f85 <code>FEED_NETWORK_WATCHDOG</code> \u6d88\u606f\uff0c\u8d85\u65f6\u65f6\u95f4\u4e3a 5 \u5206\u949f\u3002</li> <li>\u8d85\u65f6\u5219\u8c03\u7528 <code>sys.restart(\"network timeout\")</code> \u91cd\u542f\u7cfb\u7edf\u3002</li> </ul> <pre><code>--[[\n@module  network_watchdog\n@summary \u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7\u529f\u80fd\u6a21\u5757\n@version 1.0\n@date    2025.07.23\n@author  \u9a6c\u68a6\u9633\n@usage\n\u672c\u6587\u4ef6\u4e3a\u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7\u529f\u80fd\u6a21\u5757\uff0c\u76d1\u63a7\u7f51\u7edc\u73af\u5883\u662f\u5426\u5de5\u4f5c\u6b63\u5e38\uff08\u8bbe\u5907\u548c\u670d\u52a1\u5668\u53cc\u5411\u901a\u4fe1\u6b63\u5e38\uff0c\u6216\u8005\u81f3\u5c11\u5355\u5411\u901a\u4fe1\u6b63\u5e38\uff09\uff0c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u4e3a\uff1a\n1\u3001\u542f\u52a8\u4e00\u4e2a\u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7task\uff0c\u7b49\u5f85\u5176\u4ed6mqtt\u7f51\u7edc\u5e94\u7528\u529f\u80fd\u6a21\u5757\u6765\u5582\u72d7\uff0c\u5982\u679c\u5582\u72d7\u8d85\u65f6\uff0c\u5219\u63a7\u5236\u8f6f\u4ef6\u91cd\u542f\uff1b\n2\u3001\u5982\u4f55\u786e\u5b9a\u201c\u5582\u72d7\u8d85\u65f6\u65f6\u95f4\u201d\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u6709\u4ee5\u4e0b\u51e0\u4e2a\u539f\u5219\uff1b\n   (1) \u5148\u786e\u5b9a\u4e00\u4e2a\u6700\u5c0f\u57fa\u51c6\u503cT1\uff0c2\u5206\u949f\u6216\u80055\u5206\u949f\u6216\u800510\u5206\u949f\uff0c\u8fd9\u4e2a\u53d6\u503c\u53d6\u51b3\u4e8e\u5177\u4f53\u9879\u76ee\u9700\u6c42\uff0c\u4f46\u662f\u4e0d\u80fd\u592a\u77ed\uff0c\u56e0\u4e3a\u5f00\u673a\u540e\uff0c\u5728\u7f51\u7edc\u73af\u5883\u4e0d\u592a\u597d\u7684\u5730\u65b9\uff0c\u7f51\u7edc\u521d\u59cb\u5316\u53ef\u80fd\u9700\u8981\u6bd4\u8f83\u957f\u7684\u65f6\u95f4\uff0c\u4e00\u822c\u63a8\u8350\u8fd9\u4e2a\u503c\u4e0d\u80fd\u5c0f\u4e8e2\u5206\u949f\uff1b\n   (2) \u518d\u786e\u5b9a\u4e00\u4e2a\u548c\u4ea7\u54c1\u4e1a\u52a1\u903b\u8f91\u6709\u5173\u7684\u4e00\u4e2a\u503cT2\uff0c\u8fd9\u4e2a\u503c\u548c\u4ea7\u54c1\u7684\u5e94\u7528\u4e1a\u52a1\u903b\u8f91\u606f\u606f\u76f8\u5173\uff0c\u5047\u8bbe\u4f60\u7684\u4ea7\u54c1\u4e1a\u52a1\u4e2d\uff1a\n       &lt;1&gt; \u670d\u52a1\u5668\u4f1a\u5b9a\u65f6\u4e0b\u53d1\u6570\u636e\u7ed9\u8bbe\u5907\uff0c\u4f8b\u5982\u8bbe\u5907\u8fde\u63a5\u4e0a\u4e1a\u52a1\u670d\u52a1\u5668\u4e4b\u540e\uff0c\u6bcf\u96943\u5206\u949f\uff0c\u8bbe\u5907\u90fd\u4f1a\u7ed9\u670d\u52a1\u5668\u53d1\u9001\u4e00\u6b21\u5fc3\u8df3\uff0c\u7136\u540e\u670d\u52a1\u5668\u90fd\u4f1a\u7acb\u5373\u56de\u590d\u4e00\u4e2a\u5fc3\u8df3\u5e94\u7b54\u5305\uff1b\n           \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u53d63\u5206\u949f\u7684\u5927\u4e8e\u7b49\u4e8e1\u7684\u500d\u6570(\u4f8b\u59821\u500d\uff0c1.5\u500d\uff0c2\u500d\u7b49\u7b49)+\u4e00\u6bb5\u65f6\u95f4(\u4f8b\u598210\u79d2\u949f\uff0c\u5982\u679c\u524d\u9762\u662f1\u500d\uff0c\u5219\u6b64\u5904\u5fc5\u987b\u52a0\u4e00\u6bb5\u65f6\u95f4\uff0c\u7ed9\u7f51\u7edc\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u7559\u591f\u5145\u8db3\u7684\u65f6\u95f4)\uff1b\n       &lt;2&gt; mqtt\u672c\u8eab\u6709keep alive\u7684\u5fc3\u8df3\u673a\u5236\uff0c\u4f8b\u5982\u8bbe\u5907\u8fde\u63a5\u4e0a\u4e1a\u52a1\u670d\u52a1\u5668\u4e4b\u540e\uff0c\u9ed8\u8ba4\u6bcf\u96942\u5206\u949f\uff0c\u8bbe\u5907\u90fd\u4f1a\u7ed9\u670d\u52a1\u5668\u53d1\u9001\u4e00\u6b21\u5fc3\u8df3\uff0c\u670d\u52a1\u5668\u4e5f\u4f1a\u56de\u590d\u4e00\u4e2a\u5fc3\u8df3\u5e94\u7b54\u6570\u636e\uff1b\n           \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u53d62\u5206\u949f\u7684\u5927\u4e8e\u7b49\u4e8e1\u7684\u500d\u6570(\u4f8b\u59821\u500d\uff0c1.5\u500d\uff0c2\u500d\u7b49\u7b49)+\u4e00\u6bb5\u65f6\u95f4(\u4f8b\u598210\u79d2\u949f\uff0c\u5982\u679c\u524d\u9762\u662f1\u500d\uff0c\u5219\u6b64\u5904\u5fc5\u987b\u52a0\u4e00\u6bb5\u65f6\u95f4\uff0c\u7ed9\u7f51\u7edc\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u7559\u591f\u5145\u8db3\u7684\u65f6\u95f4)\uff1b\n    (3) \u53d6T1\u548cT2\u7684\u6700\u5927\u503c\uff0c\u5c31\u662f\u201c\u5582\u72d7\u8d85\u65f6\u65f6\u95f4\u201d\n3\u3001\u5176\u4ed6mqtt\u7f51\u7edc\u4e1a\u52a1\u529f\u80fd\u6a21\u5757\u7684\u5582\u72d7\u65f6\u673a\uff0c\u548c\u4e0a\u97622.2\u7684\u63cf\u8ff0\u76f8\u5bf9\u5e94\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u53ef\u4ee5\u5728\u4ee5\u4e0b\u51e0\u79cd\u65f6\u95f4\u70b9\u6267\u884c\u5582\u72d7\u52a8\u4f5c\uff1a\n   (1) \u8bbe\u5907\u6536\u5230\u670d\u52a1\u5668\u4e0b\u53d1\u7684\u6570\u636e\u65f6\n   (2) \u8bbe\u5907\u6536\u5230\u670d\u52a1\u5668\u56de\u590d\u7684mqtt\u5fc3\u8df3\u5e94\u7b54\u6570\u636e\u65f6\n4\u3001\u6700\u91cd\u8981\u7684\u4e00\u70b9\u662f\uff1a\u4ee5\u4e0a\u6240\u8bf4\u7684\u539f\u5219\uff0c\u4ec5\u4ec5\u662f\u5efa\u8bae\uff0c\u8981\u6839\u636e\u81ea\u5df1\u7684\u5b9e\u9645\u9879\u76ee\u4e1a\u52a1\u903b\u8f91\u4ee5\u53ca\u81ea\u5df1\u7684\u9700\u6c42\u6700\u7ec8\u786e\u5b9a\u770b\u95e8\u72d7\u65b9\u6848\n\n5\u3001\u5177\u4f53\u5230\u672cdemo\n   (1) \u4ea7\u54c1\u4e1a\u52a1\u903b\u8f91\u4e3a\uff1a\n       &lt;1&gt; \u521b\u5efa\u4e86\u4e00\u4e2amqtt\u8fde\u63a5\uff0c\u8bbe\u5907\u6bcf\u96945\u79d2\u949f\u53d1\u9001\u4e00\u6b21\u6570\u636e\u5230\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u4f55\u65f6\u4e0b\u53d1\u5e94\u7528\u6570\u636e\u7ed9\u8bbe\u5907\u4e0d\u786e\u5b9a\uff1b\n       &lt;2&gt; \u521b\u5efa\u4e86\u4e00\u4e2amqtt ssl\u3001\u4e0d\u9700\u8981\u8bc1\u4e66\u6821\u9a8c\u7684\u8fde\u63a5\uff0c\u8bbe\u5907\u6bcf\u96945\u79d2\u949f\u53d1\u9001\u4e00\u6b21\u6570\u636e\u5230\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u4f55\u65f6\u4e0b\u53d1\u5e94\u7528\u6570\u636e\u7ed9\u8bbe\u5907\u4e0d\u786e\u5b9a\uff1b\n       &lt;3&gt; \u521b\u5efa\u4e86\u4e00\u4e2amqtt ssl\u3001client\u5355\u5411\u6821\u9a8cserver\u8bc1\u4e66\u7684\u8fde\u63a5\uff0c\u8bbe\u5907\u6bcf\u96945\u79d2\u949f\u53d1\u9001\u4e00\u6b21\u6570\u636e\u5230\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u4f55\u65f6\u4e0b\u53d1\u5e94\u7528\u6570\u636e\u7ed9\u8bbe\u5907\u4e0d\u786e\u5b9a\uff1b\n       &lt;4&gt; \u6bcf\u96943\u5206\u949f\uff0c\u8fd9\u4e09\u8defmqtt\u8fde\u63a5\u90fd\u4f1a\u53d1\u9001\u4e00\u6b21mqtt\u5fc3\u8df3\u7ed9server\uff0cserver\u6536\u5230\u5fc3\u8df3\u540e\u56de\u590d\u5fc3\u8df3\u5e94\u7b54\u7ed9client\uff1b\n   (2) \u786e\u5b9a\u5582\u72d7\u8d85\u65f6\u65f6\u95f4\uff1a\n       &lt;1&gt; \u672cdemo\u652f\u6301\u5355WIFI\u3001\u5355\u4ee5\u592a\u7f51\u3001\u53554G\u7f51\u7edc\u8fde\u63a5\u5916\u7f51\uff0c\u7f51\u7edc\u73af\u5883\u51c6\u5907\u5c31\u7eea\u9884\u75592\u5206\u949f\u7684\u65f6\u95f4\u5df2\u7ecf\u8db3\u591f\uff0c\u6240\u4ee5\u6700\u5c0f\u57fa\u51c6\u503cT1\u53d6\u503c2\u5206\u949f\uff1b\n       &lt;2&gt; \u672cdemo\u4e2d\u5b58\u57283\u8defmqtt\u8fde\u63a5\uff0c\u4f46\u662f\u8fd93\u8defmqtt\u8fde\u63a5\u90fd\u6ca1\u6709\u5b9a\u65f6\u6216\u8005\u81f3\u5c11\u4e00\u6bb5\u65f6\u95f4\uff0c\u670d\u52a1\u5668\u4e0b\u53d1\u5e94\u7528\u6570\u636e\u7ed9\u8bbe\u5907\uff0c\u6240\u4ee5\u65e0\u6cd5\u57fa\u4e8e\u670d\u52a1\u5668\u4e0b\u53d1\u5e94\u7528\u6570\u636e\u7684\u4e1a\u52a1\u903b\u8f91\u6765\u786e\u5b9aT2\u7684\u503c\uff1b\n       &lt;3&gt; \u672cdemo\u4e2d\u5b58\u57283\u8defmqtt\u8fde\u63a5\uff0c\u6bcf1\u8defmqtt\u8fde\u63a5\uff0c\u8bbe\u5907\u90fd\u662f3\u5206\u949f\u53d1\u9001\u4e00\u6b21mqtt\u5fc3\u8df3\u6570\u636e\u7ed9\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u6536\u5230\u540e\u4f1a\u7acb\u5373\u56de\u590d\u4e00\u4e2amqtt\u5fc3\u8df3\u5e94\u7b54\u6570\u636e\u7ed9\u8bbe\u5907\uff1b\n           \u6240\u4ee5\u53ef\u4ee5\u901a\u8fc73\u5206\u949f\u7684\u5927\u4e8e\u7b49\u4e8e1\u7684\u500d\u6570(\u4f8b\u59821\u500d\uff0c1.5\u500d\uff0c2\u500d\u7b49\u7b49)+\u4e00\u6bb5\u65f6\u95f4(\u4f8b\u598210\u79d2\u949f\uff0c\u5982\u679c\u524d\u9762\u662f1\u500d\uff0c\u5219\u6b64\u5904\u5fc5\u987b\u52a0\u4e00\u6bb5\u65f6\u95f4\uff0c\u7ed9\u7f51\u7edc\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u7559\u591f\u5145\u8db3\u7684\u65f6\u95f4)\u6765\u786e\u5b9aT2\u7684\u503c\uff1b\n           \u5728\u8fd9\u4e2ademo\u4e2d\uff0c\u6211\u80fd\u63a5\u53d7\u7684\u7f51\u7edc\u8fde\u7eed\u5f02\u5e38\u65f6\u957f\u662f5\u5206\u949f\uff0c\u6240\u4ee5\uff0cT2\u53d6\u503c5\u5206\u949f\uff1b\n       &lt;4&gt; \u53d6T1 2\u5206\u949f\u548cT2 5\u5206\u949f\u7684\u6700\u5927\u503c\uff0c\u6700\u7ec8\u7684\u5582\u72d7\u8d85\u65f6\u65f6\u95f4\u5c31\u662f5\u5206\u949f\uff1b\n   (3) \u786e\u5b9a\u5582\u72d7\u65f6\u673a\uff1a\n       &lt;1&gt; 3\u8defmqtt\u8fde\u63a5\u4e2d\uff0c\u4efb\u4f551\u8def\u6536\u5230\u670d\u52a1\u5668\u7684\u4e0b\u53d1\u7684\u5e94\u7528\u6570\u636e\u65f6\uff1b\n       &lt;2&gt; 3\u8defmqtt\u8fde\u63a5\u4e2d\uff0c\u4efb\u4f551\u8def\u6536\u5230\u670d\u52a1\u5668\u7684\u56de\u590d\u7684\u5fc3\u8df3\u5e94\u7b54\u6570\u636e\u65f6\uff1b\n6\u3001\u672cdemo\u8bbe\u8ba1\u7684\u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7\u529f\u80fd\u6a21\u5757\uff0c\u53ef\u4ee5\u68c0\u6d4b\u4ee5\u4e0b\u4e24\u79cd\u79cd\u7684\u4efb\u610f\u4e00\u79cd\u7f51\u7edc\u73af\u5883\u5f02\u5e38\uff1a\n   (1) \u7f51\u7edc\u73af\u5883\u8fde\u7eed\u8d85\u8fc75\u5206\u949f\u6ca1\u6709\u51c6\u5907\u5c31\u7eea\n   (2) mqtt\u3001mqtt ssl\u3001mqtt ssl\u5355\u5411\u6821\u9a8c\u8bc1\u4e663\u8def\u8fde\u63a5\u4e2d\uff0c\u8fde\u7eed5\u5206\u949f\u6ca1\u6709\u6536\u5230\u670d\u52a1\u5668\u4e0b\u53d1\u7684\u5e94\u7528\u6570\u636e\u6216\u8005\u670d\u52a1\u5668\u56de\u590d\u7684\u5fc3\u8df3\u5e94\u7b54\u6570\u636e\uff1b \n\n\u672c\u6587\u4ef6\u6ca1\u6709\u5bf9\u5916\u63a5\u53e3\uff0c\u76f4\u63a5\u5728main.lua\u4e2drequire \"network_watchdog\"\u5c31\u53ef\u4ee5\u52a0\u8f7d\u8fd0\u884c\uff1b\n\u5916\u90e8\u529f\u80fd\u6a21\u5757\u5582\u72d7\u65f6\uff0c\u76f4\u63a5\u8c03\u7528sys.publish(\"FEED_NETWORK_WATCHDOG\")\n]]\n\n-- \u7f51\u7edc\u73af\u5883\u68c0\u6d4b\u770b\u95e8\u72d7task\u5904\u7406\u51fd\u6570\nlocal function network_watchdog_task_func()\n    while true do\n        --\u5982\u679c\u7b49\u5f85180\u79d2\u6ca1\u6709\u7b49\u5230\"FEED_NETWORK_WATCHDOG\"\u6d88\u606f\uff0c\u5219\u770b\u95e8\u72d7\u8d85\u65f6\n        if not sys.waitUntil(\"FEED_NETWORK_WATCHDOG\", 300000) then\n            log.error(\"network_watchdog_task_func timeout\")\n            -- \u7b49\u5f853\u79d2\u949f\uff0c\u7136\u540e\u8f6f\u4ef6\u91cd\u542f\n            sys.wait(3000)\n            rtos.reboot()\n        end\n    end\nend\n\n--\u521b\u5efa\u5e76\u4e14\u542f\u52a8\u4e00\u4e2atask\n--\u8fd0\u884c\u8fd9\u4e2atask\u7684\u5904\u7406\u51fd\u6570network_watchdog_task_func\nsys.taskInit(network_watchdog_task_func)\n</code></pre>"},{"location":"test/#66-ssl","title":"6.6 SSL \u8fde\u63a5\u5b9e\u73b0","text":"<p>\u9879\u76ee\u5c55\u793a\u4e86\u4e09\u79cd\u4e0d\u540c\u7684 SSL \u8fde\u63a5\u5b9e\u73b0\u65b9\u5f0f\uff0c\u6ee1\u8db3\u4e0d\u540c\u5b89\u5168\u7b49\u7ea7\u7684\u9700\u6c42\u3002</p>"},{"location":"test/#661-mqtts","title":"6.6.1 \u65e0\u8bc1\u4e66\u6821\u9a8c (<code>mqtts/</code>)","text":"<ul> <li>\u5728\u521b\u5efa MQTT \u5ba2\u6237\u7aef\u65f6\uff0c\u8bbe\u7f6e <code>ssl</code> \u53c2\u6570\u4e3a <code>true</code>\u3002</li> <li>\u4e0d\u8fdb\u884c\u670d\u52a1\u5668\u8bc1\u4e66\u6821\u9a8c\uff0c\u9002\u7528\u4e8e\u5bf9\u5b89\u5168\u6027\u8981\u6c42\u4e0d\u9ad8\u7684\u573a\u666f\u3002</li> </ul>"},{"location":"test/#662-mqtts_ca","title":"6.6.2 \u5355\u5411\u8bc1\u4e66\u6821\u9a8c (<code>mqtts_ca/</code>)","text":"<ul> <li>\u52a0\u8f7d\u670d\u52a1\u5668 CA \u8bc1\u4e66\u6587\u4ef6 <code>openluat_root_ca.crt</code>\u3002</li> <li>\u5728\u521b\u5efa MQTT \u5ba2\u6237\u7aef\u65f6\uff0c\u914d\u7f6e <code>ssl</code> \u53c2\u6570\uff0c\u6307\u5b9a CA \u8bc1\u4e66\u8def\u5f84\u3002</li> <li>\u4f9d\u8d56 <code>sntp_app.lua</code> \u540c\u6b65\u7cfb\u7edf\u65f6\u95f4\uff0c\u4ee5\u9a8c\u8bc1\u8bc1\u4e66\u6709\u6548\u671f\u3002</li> </ul>"},{"location":"test/#663-mqtts_mutual_ca","title":"6.6.3 \u53cc\u5411\u8bc1\u4e66\u6821\u9a8c (<code>mqtts_mutual_ca/</code>)","text":"<ul> <li>\u540c\u65f6\u52a0\u8f7d\u670d\u52a1\u5668 CA \u8bc1\u4e66\u3001\u5ba2\u6237\u7aef\u8bc1\u4e66\u548c\u5ba2\u6237\u7aef\u79c1\u94a5\u3002</li> <li>\u5728\u521b\u5efa MQTT \u5ba2\u6237\u7aef\u65f6\uff0c\u914d\u7f6e <code>ssl</code> \u53c2\u6570\uff0c\u6307\u5b9a\u6240\u6709\u8bc1\u4e66\u548c\u5bc6\u94a5\u7684\u8def\u5f84\u3002</li> <li>\u4f7f\u7528\u7279\u5b9a\u7aef\u53e3\uff088886\uff09\u8fdb\u884c\u8fde\u63a5\u3002</li> </ul>"},{"location":"test/#_6","title":"\u4e03\u3001\u7cfb\u7edf\u4e0e\u7528\u6237\u6d88\u606f\u7c7b\u578b","text":""},{"location":"test/#71","title":"7.1 \u7cfb\u7edf\u6d88\u606f","text":"<ul> <li><code>IP_READY</code>\uff1a\u7f51\u7edc IP \u5730\u5740\u5df2\u51c6\u5907\u597d\u3002</li> <li><code>IP_LOSE</code>\uff1a\u7f51\u7edc IP \u5730\u5740\u4e22\u5931\u3002</li> <li><code>NTP_UPDATE</code>\uff1aSNTP \u65f6\u95f4\u540c\u6b65\u5b8c\u6210\u3002</li> </ul>"},{"location":"test/#72","title":"7.2 \u7528\u6237\u6d88\u606f","text":"<ul> <li><code>RECV_DATA_FROM_SERVER</code>\uff1a\u4ece MQTT \u670d\u52a1\u5668\u63a5\u6536\u5230\u6570\u636e\u3002</li> <li><code>SEND_DATA_REQ</code>\uff1a\u8bf7\u6c42\u53d1\u9001\u6570\u636e\u3002</li> <li><code>FEED_NETWORK_WATCHDOG</code>\uff1a\u7f51\u7edc\u770b\u95e8\u72d7\u5582\u72d7\u6d88\u606f\u3002</li> </ul>"},{"location":"test/#_7","title":"\u516b\u3001\u6f14\u793a\u529f\u80fd","text":""},{"location":"test/#81","title":"8.1 \u51c6\u5907\u5de5\u4f5c","text":""},{"location":"test/#811-mqtt","title":"8.1.1 MQTT \u5ba2\u6237\u7aef\u5efa\u7acb","text":"<p>MQTT \u5ba2\u6237\u7aef\u6d4b\u8bd5\u5de5\u5177\uff1aMQTT \u5ba2\u6237\u7aef\u8f6f\u4ef6 MQTTX</p> <p>\uff081\uff09\u521b\u5efa\u4e00\u4e2a MQTT \u5ba2\u6237\u7aef</p> <p>\u8fd9\u91cc\u6211\u4f7f\u7528\u5408\u5b99\u6d4b\u8bd5\u670d\u52a1\u5668\uff08lbsmqtt.airm2m.com:1884\uff09\u8fdb\u884c\u5efa\u7acb\uff0c\u5927\u5bb6\u4e00\u5b9a\u4e0d\u8981\u5c06\u6d4b\u8bd5\u670d\u52a1\u5668\u7528\u4e8e\u6b63\u5f0f\u6279\u91cf\u7684\u9879\u76ee\u4e2d\u3002</p> <p></p> <p>\uff082\uff09\u8bbe\u7f6e\u53d1\u5e03/\u8ba2\u9605\u4e3b\u9898</p> <p>\u5728\u8bbe\u7f6e\u53d1\u5e03/\u8ba2\u9605\u4e3b\u9898\u65f6\uff0c\u4e3b\u9898\u683c\u5f0f\u4e00\u5b9a\u8981\u6839\u636e\u8981\u6c42\u6765\u5199\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u6570\u636e\u65e0\u6cd5\u901a\u4fe1\u7684\u60c5\u51b5\u3002</p> <p></p>"},{"location":"test/#812-mqtt-ssl","title":"8.1.2 MQTT SSL \u5ba2\u6237\u7aef\u5efa\u7acb\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\u3001\u5355\u5411\u8ba4\u8bc1\uff09","text":"<p>MQTT \u5ba2\u6237\u7aef\u6d4b\u8bd5\u5de5\u5177\uff1aMQTT \u5ba2\u6237\u7aef\u8f6f\u4ef6 MQTTX</p> <p>\uff081\uff09\u521b\u5efa\u4e00\u4e2a MQTT \u5ba2\u6237\u7aef</p> <p>\u8fd9\u91cc\u6211\u4f7f\u7528\u5408\u5b99\u6d4b\u8bd5\u670d\u52a1\u5668\uff08airtest.openluat.com:8888\uff09\u8fdb\u884c\u5efa\u7acb\uff0c\u5927\u5bb6\u4e00\u5b9a\u4e0d\u8981\u5c06\u6d4b\u8bd5\u670d\u52a1\u5668\u7528\u4e8e\u6b63\u5f0f\u6279\u91cf\u7684\u9879\u76ee\u4e2d\u3002 \u65e0\u8bc1\u4e66\u6821\u9a8c\u3001\u5355\u5411\u8ba4\u8bc1\u4f7f\u7528\u7684\u662f\u540c\u4e00\u4e2a\u57df\u540d\u7aef\u53e3\uff0c\u5728 MQTTX \u5de5\u5177\u4e0a\u521b\u5efa\u5ba2\u6237\u7aef\u53ea\u662f\u7528\u4e8e\u4e0e Air8000 \u5efa\u7acb\u7684 MQTT \u5ba2\u6237\u7aef\u8fdb\u884c\u6570\u636e\u901a\u4fe1\uff0c\u56e0\u6b64\u8fd9\u65f6\u5019\u53ef\u4ee5\u5728 MQTTX \u5de5\u5177\u4e0a\u53ea\u5efa\u7acb\u4e00\u4e2a MQTT SSL \u5ba2\u6237\u7aef\u3002</p> <p></p> <p>\uff082\uff09\u8bbe\u7f6e\u53d1\u5e03/\u8ba2\u9605\u4e3b\u9898</p> <p>\u5728\u8bbe\u7f6e\u53d1\u5e03/\u8ba2\u9605\u4e3b\u9898\u65f6\uff0c\u4e3b\u9898\u683c\u5f0f\u4e00\u5b9a\u8981\u6839\u636e\u8981\u6c42\u6765\u5199\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u6570\u636e\u65e0\u6cd5\u901a\u4fe1\u7684\u60c5\u51b5\u3002</p> <p></p>"},{"location":"test/#813-mqtt-ssl","title":"8.1.3 MQTT SSL \u5ba2\u6237\u7aef\u5efa\u7acb\uff08\u53cc\u5411\u8ba4\u8bc1\uff09","text":"<p>MQTT \u5ba2\u6237\u7aef\u6d4b\u8bd5\u5de5\u5177\uff1aMQTT \u5ba2\u6237\u7aef\u8f6f\u4ef6 MQTTX</p> <p>\uff081\uff09\u521b\u5efa\u4e00\u4e2a MQTT \u5ba2\u6237\u7aef</p> <p>\u8fd9\u91cc\u6211\u4f7f\u7528\u5408\u5b99\u6d4b\u8bd5\u670d\u52a1\u5668\uff08airtest.openluat.com:8886\uff09\u8fdb\u884c\u5efa\u7acb\uff0c\u5927\u5bb6\u4e00\u5b9a\u4e0d\u8981\u5c06\u6d4b\u8bd5\u670d\u52a1\u5668\u7528\u4e8e\u6b63\u5f0f\u6279\u91cf\u7684\u9879\u76ee\u4e2d\u3002</p> <p></p> <p>\uff082\uff09\u8bbe\u7f6e\u53d1\u5e03/\u8ba2\u9605\u4e3b\u9898</p> <p>\u5728\u8bbe\u7f6e\u53d1\u5e03/\u8ba2\u9605\u4e3b\u9898\u65f6\uff0c\u4e3b\u9898\u683c\u5f0f\u4e00\u5b9a\u8981\u6839\u636e\u8981\u6c42\u6765\u5199\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u6570\u636e\u65e0\u6cd5\u901a\u4fe1\u7684\u60c5\u51b5\u3002</p> <p></p>"},{"location":"test/#82","title":"8.2 \u4e0d\u540c\u7f51\u5361\u5207\u6362","text":"<p>Air8000 \u6a21\u7ec4\u652f\u6301\u5355 4g \u7f51\u5361\uff0c\u5355 wifi \u7f51\u5361\uff0c\u5355 spi \u4ee5\u592a\u7f51\u5361\uff0c\u591a\u7f51\u5361\u3002</p>"},{"location":"test/#4g","title":"\u5207\u6362\u7f51\u5361\u4e3a 4G \u7f51\u5361\uff1a","text":"<p>\u5728 <code>netdrv_device.lua</code> \u6a21\u5757\u91cc\u53ea\u6253\u5f00 <code>netdrv_4g</code> \u6a21\u5757\u3002<code>netdrv_4g.lua</code> \u6a21\u5757\u4e2d\u7684\u4ee3\u7801\u4e0d\u9700\u8981\u4fee\u6539\u3002</p> <p></p> <p>LuaTools \u5de5\u5177\u65e5\u5fd7\u6253\u5370\uff1a</p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5982\u51fa\u73b0\u7c7b\u4f3c <code>I/user.netdrv_4g.ip_ready_func IP_READY 10.246.107.37 255.255.255.255 0.0.0.0 nil</code> \u7684\u65e5\u5fd7\uff0c\u5219\u8868\u793a 4g \u7f51\u5361\u8fde\u63a5\u6210\u529f\u3002</p> <p></p>"},{"location":"test/#wifi","title":"\u5207\u6362\u7f51\u5361\u4e3a WiFi \u7f51\u5361\uff1a","text":"<p>\u6ce8\u610f\uff1a\u5982\u679c\u9700\u8981\u5355 WIFI STA \u7f51\u5361\uff0c\u6253\u5f00 <code>require \"netdrv_wifi\"</code>\uff0c\u5176\u4f59\u6ce8\u91ca\u6389\uff1b\u540c\u65f6 <code>netdrv_wifi.lua</code> \u4e2d\u7684 <code>wlan.connect(\"\u8336\u5ba4-\u964d\u529f\u8017,\u627e\u5408\u5b99!\", \"Air123456\", 1)</code>\uff0c\u524d\u4e24\u4e2a\u53c2\u6570\uff0c\u4fee\u6539\u4e3a\u81ea\u5df1\u6d4b\u8bd5\u65f6 wifi \u70ed\u70b9\u7684\u540d\u79f0\u548c\u5bc6\u7801\uff1b\u6ce8\u610f\uff1a\u4ec5\u652f\u6301 2.4G \u7684 wifi\uff0c\u4e0d\u652f\u6301 5G \u7684 wifi</p> <p>\u5728 <code>netdrv_device.lua</code> \u6a21\u5757\u91cc\u53ea\u6253\u5f00 <code>netdrv_wifi</code> \u6a21\u5757\u3002<code>netdrv_wifi</code> \u6a21\u5757\u4e2d\u7684\u4ee3\u7801\u4e0d\u9700\u8981\u4fee\u6539\u3002</p> <p></p> <p>luatools \u65e5\u5fd7\u6253\u5370\uff1a</p> <p>\u5982\u51fa\u73b0\u7c7b\u4f3c <code>I/user.netdrv_wifi.ip_ready_func IP_READY {\"gw\":\"192.168.168.199\",\"rssi\":-31,\"bssid\":\"722D10C7C9CF\"}</code> \u7684\u65e5\u5fd7\uff0c\u5219\u8868\u793a WIFI STA \u7f51\u5361\u8054\u7f51\u6210\u529f\u3002</p> <p></p>"},{"location":"test/#_8","title":"\u5207\u6362\u7f51\u5361\u4e3a\u4ee5\u592a\u7f51\u5361\uff1a","text":"<p>\u6ce8\u610f\uff1aAir8000 \u7684\u4ee5\u592a\u7f51\u5361\u662f\u901a\u8fc7 SPI \u5916\u6302 CH390H \u82af\u7247\u5b9e\u73b0\u7684\u3002</p> <p>\u5728 <code>netdrv_device.lua</code> \u6a21\u5757\u91cc\u53ea\u6253\u5f00 <code>netdrv_eth_spi</code> \u6a21\u5757\u3002\u5982\u679c\u662f\u4f7f\u7528\u5408\u5b99\u5b98\u65b9\u7684\u5f00\u53d1\u677f\uff0c<code>netdrv_eth_spi</code> \u6a21\u5757\u4e2d\u7684\u4ee3\u7801\u4e0d\u9700\u8981\u4fee\u6539\u3002</p> <p></p> <p>luatools \u65e5\u5fd7\u6253\u5370\uff1a</p> <p>\u5982\u51fa\u73b0\u7c7b\u4f3c <code>I/user.netdrv_eth_spi.ip_ready_func IP_READY 192.168.0.110 255.255.255.0 192.168.0.1 nil</code> \u7684\u65e5\u5fd7\uff0c\u5219\u8868\u793a\u4ee5\u592a\u7f51\u5361\u8054\u7f51\u6210\u529f\u3002</p> <p></p>"},{"location":"test/#_9","title":"\u591a\u7f51\u5361\u81ea\u52a8\u5207\u6362\uff1a","text":"<p>\u5982\u679c\u9700\u8981\u591a\u7f51\u5361\uff0c\u6253\u5f00 <code>require \"netdrv_multiple\"</code>\uff0c\u5176\u4f59\u6ce8\u91ca\u6389\uff1b\u540c\u65f6 <code>netdrv_multiple.lua</code> \u4e2d\u7684 <code>ssid = \"\u8336\u5ba4-\u964d\u529f\u8017,\u627e\u5408\u5b99!\", password = \"Air123456\"</code>, \u4fee\u6539\u4e3a\u81ea\u5df1\u6d4b\u8bd5\u65f6 wifi \u70ed\u70b9\u7684\u540d\u79f0\u548c\u5bc6\u7801\uff1b\u6ce8\u610f\uff1a\u4ec5\u652f\u6301 2.4G \u7684 wifi\uff0c\u4e0d\u652f\u6301 5G \u7684 wifi\u3002 \u53ef\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u8c03\u6574\u7f51\u5361\u7684\u4f18\u5148\u7ea7\uff0c\u4ee5\u4e0b\u793a\u4f8b\u8bbe\u7f6e\u4e3a\u4ee5\u592a\u7f51\u5361\u662f\u6700\u9ad8\u4f18\u5148\u7ea7\u3002</p> <p>\u9996\u5148\u5728 <code>netdrv_device.lua</code> \u6587\u4ef6\u4e2d\u53ea\u6253\u5f00 <code>netdrv_multiple</code> \u6a21\u5757\u3002</p> <p></p> <p>\u9ed8\u8ba4\u4ee5\u592a\u7f51\u5361\u8fdb\u884c\u8fde\u63a5</p> <p></p> <p>\u62d4\u6389\u7f51\u7ebf\u540e\uff0c\u7f51\u7edc\u5207\u6362\u4e3a wifi \u7f51\u5361</p> <p></p> <p>\u5173\u95ed\u8bbe\u5907\u8fde\u63a5\u7684 wifi \u70ed\u70b9\uff0c\u5207\u6362\u4e3a 4g \u7f51\u5361</p> <p></p>"},{"location":"test/#83-mqtt","title":"8.3 MQTT \u901a\u4fe1\u5b9e\u64cd","text":""},{"location":"test/#mqtt_1","title":"MQTT \u5ba2\u6237\u7aef\u6570\u636e\u53d1\u9001\u4e0e\u63a5\u6536\uff1a","text":"<p>\u4e0b\u56fe\u4e3a Air8000 \u6a21\u7ec4\u5efa\u7acb\u7684 MQTT \u5ba2\u6237\u7aef\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u5411\u5176\u4ed6\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\u6210\u529f\u540e\u7684\u65e5\u5fd7\u6253\u5370\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u5728 MQTTX \u6d4b\u8bd5\u5de5\u5177\u4e0a\u5efa\u7acb\u76f8\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\uff08Client ID \u9700\u8981\u4e0d\u4e00\u81f4\uff09\uff0c\u901a\u8fc7\u8ba2\u9605\u6307\u5b9a\u4e3b\u9898\uff0c\u53ef\u4ee5\u63a5\u6536\u5230\u5176\u4ed6\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u901a\u8fc7\u8be5\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u7684\u6570\u636e\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u901a\u8fc7 MQTTX \u6d4b\u8bd5\u5de5\u5177\u4e0a\u5efa\u7acb\u7684 MQTT \u5ba2\u6237\u7aef\u5411\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u3002</p> <p></p> <p>\u6a21\u7ec4\u7aef\u5728\u5efa\u7acb\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u540e\uff0c\u5728\u4ee3\u7801\u4e2d\u8fd8\u8ba2\u9605\u4e86\u6307\u5b9a\u4e3b\u9898\uff0c\u56e0\u6b64 MQTTX \u6d4b\u8bd5\u5de5\u5177\u4e0a\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u6570\u636e\u65f6\uff0c\u6a21\u7ec4\u7aef\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u53ef\u4ee5\u63a5\u6536\u5230\u8fd9\u4e2a\u6570\u636e\uff0c\u5e76\u5728\u4ee3\u7801\u4e2d\u505a\u4e86\u5904\u7406\uff0c\u4ece\u800c\u8ba9\u5176\u663e\u793a\u5728 LuaTools \u5de5\u5177\u4e0a\u3002</p> <p></p> <p>\u5728 PC \u7aef\u4f7f\u7528\u4e32\u53e3\u5de5\u5177\u53d1\u9001\u6570\u636e\u7ed9 Air8000\uff0cAir8000 \u5185\u90e8\u4f1a\u5c06\u63a5\u6536\u5230\u7684\u6570\u636e\u901a\u8fc7\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u6309\u7167\u6307\u5b9a\u4e3b\u9898\u8f6c\u53d1\u51fa\u53bb\uff0cMQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u901a\u8fc7\u8ba2\u9605\u8fd9\u4e2a\u6307\u5b9a\u4e3b\u9898\u53ef\u4ee5\u63a5\u6536\u5230 Air8000 \u8f6c\u53d1\u51fa\u53bb\u7684\u6570\u636e\u3002</p> <p></p> <p>\u5728 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\uff0c\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u6570\u636e\u540e\uff0cAir8000 \u6a21\u7ec4\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u901a\u8fc7\u8ba2\u9605\u8be5\u6307\u5b9a\u4e3b\u9898\u540e\u53ef\u4ee5\u63a5\u6536\u5230\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u901a\u8fc7 UART \u8f6c\u53d1\u7ed9 PC \u7aef\u4e32\u53e3\u5de5\u5177\u3002</p> <p></p>"},{"location":"test/#mqtt-ssl","title":"MQTT SSL \u5ba2\u6237\u7aef\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\u6570\u636e\u53d1\u9001\u4e0e\u63a5\u6536\uff1a","text":"<p>\u4e0b\u56fe\u4e3a Air8000 \u6a21\u7ec4\u5efa\u7acb\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u5411\u5176\u4ed6\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\u6210\u529f\u540e\u7684\u65e5\u5fd7\u6253\u5370\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u5728 MQTTX \u6d4b\u8bd5\u5de5\u5177\u4e0a\u5efa\u7acb\u76f8\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08Client ID \u9700\u8981\u4e0d\u4e00\u81f4\uff09\uff0c\u901a\u8fc7\u8ba2\u9605\u6307\u5b9a\u4e3b\u9898\uff0c\u53ef\u4ee5\u63a5\u6536\u5230\u5176\u4ed6\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u901a\u8fc7\u8be5\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u7684\u6570\u636e\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u901a\u8fc7 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u5411\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u3002</p> <p></p> <p>\u6a21\u7ec4\u7aef\u5728\u5efa\u7acb\u540c\u57df\u540d\u7aef\u53e3 MQTT SSL \u5ba2\u6237\u7aef\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\u540e\uff0c\u5728\u4ee3\u7801\u4e2d\u8ba2\u9605\u4e86\u8fd9\u4e2a\u6307\u5b9a\u4e3b\u9898\uff0c\u56e0\u6b64\u5f53 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u6570\u636e\u65f6\uff0c\u6a21\u7ec4\u7aef\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\u53ef\u4ee5\u63a5\u6536\u5230\u8fd9\u4e2a\u6570\u636e\uff0c\u5e76\u5728\u4ee3\u7801\u4e2d\u505a\u4e86\u5904\u7406\uff0c\u4ece\u800c\u8ba9\u5176\u663e\u793a\u5728 LuaTools \u5de5\u5177\u4e0a\u3002</p> <p></p> <p>\u5728 PC \u7aef\u4f7f\u7528\u4e32\u53e3\u5de5\u5177\u53d1\u9001\u6570\u636e\u7ed9 Air8000\uff0cAir8000 \u5185\u90e8\u4f1a\u5c06\u63a5\u6536\u5230\u7684\u6570\u636e\u901a\u8fc7\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3 MQTT SSL \u5ba2\u6237\u7aef\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\u6309\u7167\u6307\u5b9a\u4e3b\u9898\u8f6c\u53d1\u51fa\u53bb\uff0cMQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u901a\u8fc7\u8ba2\u9605\u8fd9\u4e2a\u6307\u5b9a\u4e3b\u9898\u53ef\u4ee5\u63a5\u6536\u5230 Air8000 \u8f6c\u53d1\u51fa\u53bb\u7684\u6570\u636e\u3002</p> <p></p> <p>\u5728 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u6570\u636e\u540e\uff0cAir8000 \u6a21\u7ec4\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u65e0\u8bc1\u4e66\u6821\u9a8c\uff09\u901a\u8fc7\u8ba2\u9605\u8be5\u6307\u5b9a\u4e3b\u9898\u540e\u53ef\u4ee5\u63a5\u6536\u5230\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u901a\u8fc7 UART \u8f6c\u53d1\u7ed9 PC \u7aef\u4e32\u53e3\u5de5\u5177\u3002</p> <p></p>"},{"location":"test/#mqtt-ssl_1","title":"MQTT SSL \u5ba2\u6237\u7aef\uff08\u5355\u5411\u8ba4\u8bc1\uff09\u6570\u636e\u53d1\u9001\u4e0e\u63a5\u6536","text":"<p>\u4e0b\u56fe\u4e3a Air8000 \u6a21\u7ec4\u5efa\u7acb\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u5355\u5411\u8ba4\u8bc1\uff09\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u5411\u5176\u4ed6\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\u6210\u529f\u540e\u7684\u65e5\u5fd7\u6253\u5370\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u5728 MQTTX \u6d4b\u8bd5\u5de5\u5177\u4e0a\u5efa\u7acb\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08Client ID \u9700\u8981\u4e0d\u4e00\u81f4\uff09\uff0c\u901a\u8fc7\u8ba2\u9605\u6307\u5b9a\u4e3b\u9898\uff0c\u53ef\u4ee5\u63a5\u6536\u5230\u5176\u4ed6\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u901a\u8fc7\u8be5\u4e3b\u9898\u53d1\u9001\u7684\u6570\u636e\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u901a\u8fc7 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u5355\u5411\u8ba4\u8bc1\uff09\u5411\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u3002</p> <p></p> <p>\u6a21\u7ec4\u7aef\u5728\u5efa\u7acb\u540c\u57df\u540d\u7aef\u53e3 MQTT SSL \u5ba2\u6237\u7aef\uff08\u5355\u5411\u8ba4\u8bc1\uff09\u540e\uff0c\u5728\u4ee3\u7801\u4e2d\u8fd8\u8ba2\u9605\u4e86\u6307\u5b9a\u4e3b\u9898\uff0c\u56e0\u6b64\u5f53 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u6570\u636e\u65f6\uff0c\u6a21\u7ec4\u7aef\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u5355\u5411\u8ba4\u8bc1\uff09\u53ef\u4ee5\u63a5\u6536\u5230\u8fd9\u4e2a\u6570\u636e\uff0c\u5e76\u5728\u4ee3\u7801\u4e2d\u505a\u4e86\u5904\u7406\uff0c\u4ece\u800c\u8ba9\u5176\u663e\u793a\u5728 LuaTools \u5de5\u5177\u4e0a\u3002</p> <p></p> <p>\u5728 PC \u7aef\u4f7f\u7528\u4e32\u53e3\u5de5\u5177\u53d1\u9001\u6570\u636e\u7ed9 Air8000\uff0cAir8000 \u5185\u90e8\u4f1a\u5c06\u63a5\u6536\u5230\u7684\u6570\u636e\u901a\u8fc7\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u5355\u5411\u8ba4\u8bc1\uff09\u6309\u7167\u6307\u5b9a\u4e3b\u9898\u8f6c\u53d1\u51fa\u53bb\uff0cMQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u901a\u8fc7\u8ba2\u9605\u8fd9\u4e2a\u6307\u5b9a\u4e3b\u9898\u53ef\u4ee5\u63a5\u6536\u5230 Air8000 \u8f6c\u53d1\u51fa\u53bb\u7684\u6570\u636e\u3002</p> <p></p> <p>\u5728 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u5355\u5411\u8ba4\u8bc1\uff09\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u6570\u636e\u540e\uff0cAir8000 \u6a21\u7ec4\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u5355\u5411\u8ba4\u8bc1\uff09\u901a\u8fc7\u8ba2\u9605\u8be5\u6307\u5b9a\u4e3b\u9898\u540e\u53ef\u4ee5\u63a5\u6536\u5230\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u901a\u8fc7 UART \u8f6c\u53d1\u7ed9 PC \u7aef\u4e32\u53e3\u5de5\u5177\u3002</p> <p></p>"},{"location":"test/#mqtt-ssl_2","title":"MQTT SSL \u5ba2\u6237\u7aef\uff08\u53cc\u5411\u8ba4\u8bc1\uff09\u6570\u636e\u53d1\u9001\u4e0e\u63a5\u6536","text":"<p>\u4e0b\u56fe\u4e3a Air8000 \u6a21\u7ec4\u5efa\u7acb\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u53cc\u5411\u8ba4\u8bc1\uff09\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u5411\u5176\u4ed6\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\u6210\u529f\u540e\u7684\u65e5\u5fd7\u6253\u5370\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u5728 MQTTX \u6d4b\u8bd5\u5de5\u5177\u4e0a\u5efa\u7acb\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\uff08Client ID \u9700\u8981\u4e0d\u4e00\u81f4\uff09\uff0c\u901a\u8fc7\u8ba2\u9605\u6307\u5b9a\u4e3b\u9898\uff0c\u53ef\u4ee5\u63a5\u6536\u5230\u5176\u4ed6\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT \u5ba2\u6237\u7aef\u901a\u8fc7\u8be5\u4e3b\u9898\u53d1\u9001\u7684\u6570\u636e\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u901a\u8fc7 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u5411\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u3002</p> <p></p> <p>\u6a21\u7ec4\u7aef\u5728\u5efa\u7acb\u540c\u57df\u540d\u7aef\u53e3 MQTT SSL \u5ba2\u6237\u7aef\uff08\u53cc\u5411\u8ba4\u8bc1\uff09\u540e\uff0c\u5728\u4ee3\u7801\u4e2d\u8fd8\u8ba2\u9605\u4e86\u6307\u5b9a\u4e3b\u9898\uff0c\u56e0\u6b64\u5f53 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u6570\u636e\u65f6\uff0c\u6a21\u7ec4\u7aef\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u53cc\u5411\u8ba4\u8bc1\uff09\u53ef\u4ee5\u63a5\u6536\u5230\u8fd9\u4e2a\u6570\u636e\uff0c\u5e76\u5728\u4ee3\u7801\u4e2d\u505a\u4e86\u5904\u7406\uff0c\u4ece\u800c\u8ba9\u5176\u663e\u793a\u5728 LuaTools \u5de5\u5177\u4e0a\u3002</p> <p></p> <p>\u5728 PC \u7aef\u4f7f\u7528\u4e32\u53e3\u5de5\u5177\u53d1\u9001\u6570\u636e\u7ed9 Air8000\uff0cAir8000 \u5185\u90e8\u4f1a\u5c06\u63a5\u6536\u5230\u7684\u6570\u636e\u901a\u8fc7\u5efa\u7acb\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u53cc\u5411\u8ba4\u8bc1\uff09\u6309\u7167\u6307\u5b9a\u4e3b\u9898\u8f6c\u53d1\u51fa\u53bb\uff0cMQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\u901a\u8fc7\u8ba2\u9605\u8fd9\u4e2a\u6307\u5b9a\u4e3b\u9898\u53ef\u4ee5\u63a5\u6536\u5230 Air8000 \u8f6c\u53d1\u51fa\u53bb\u7684\u6570\u636e\u3002</p> <p></p> <p>\u5728 MQTTX \u6d4b\u8bd5\u5de5\u5177\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u53cc\u5411\u8ba4\u8bc1\uff09\u901a\u8fc7\u6307\u5b9a\u4e3b\u9898\u53d1\u9001\u6570\u636e\u540e\uff0cAir8000 \u6a21\u7ec4\u5efa\u7acb\u7684\u540c\u57df\u540d\u7aef\u53e3\u7684 MQTT SSL \u5ba2\u6237\u7aef\uff08\u53cc\u5411\u8ba4\u8bc1\uff09\u901a\u8fc7\u8ba2\u9605\u8be5\u6307\u5b9a\u4e3b\u9898\u540e\u53ef\u4ee5\u63a5\u6536\u5230\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u901a\u8fc7 UART \u8f6c\u53d1\u7ed9 PC \u7aef\u4e32\u53e3\u5de5\u5177\u3002</p> <p></p>"},{"location":"test/#_10","title":"\u516d\u3001\u603b\u7ed3","text":"<p>\u81f3\u6b64\uff0c\u6211\u4eec\u6f14\u793a\u4e86\u4f7f\u7528\u4e0d\u540c\u7f51\u5361\u8fdb\u884c MQTT \u901a\u4fe1\u7684\u5168\u8fc7\u7a0b\uff0c\u76f8\u4fe1\u806a\u660e\u7684\u4f60\u5df2\u7ecf\u5b8c\u5168\u9886\u609f MQTT \u901a\u4fe1\u7684\u903b\u8f91\u4e86\uff0c\u5feb\u6765\u5b9e\u9645\u64cd\u4f5c\u4e00\u4e0b\u5427\uff01</p>"}]}